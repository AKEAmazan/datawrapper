var publish=function(){"use strict";function e(){}function t(e){for(var t,n,i=arguments,s=1,r=arguments.length;s<r;s++)for(t in n=i[s])e[t]=n[t];return e}function n(e,t){t.appendChild(e)}function i(e,t,n){t.insertBefore(e,n)}function s(e){e.parentNode.removeChild(e)}function r(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function a(e){for(var t=0;t<e.length;t+=1)e[t]&&e[t].d()}function u(e){return document.createElement(e)}function o(e){return document.createTextNode(e)}function c(e,t,n){e.addEventListener(t,n,!1)}function l(e,t,n){e.removeEventListener(t,n,!1)}function h(e,t,n){e.style.setProperty(t,n)}function d(){return Object.create(null)}function p(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function f(e,t){return e!==t||e&&"object"==typeof e||"function"==typeof e}function m(e,t,n,i,s){for(var r in t)if(n[r]){var a=i[r],u=s[r],o=t[r];if(o)for(var c=0;c<o.length;c+=1){var l=o[c];l.__calling||(l.__calling=!0,l.call(e,a,u),l.__calling=!1)}}}function b(e){return e?this._state[e]:this._state}function _(e,t,n){var i=n&&n.defer?this._observers.post:this._observers.pre;return(i[e]||(i[e]=[])).push(t),n&&!1===n.init||(t.__calling=!0,t.call(this,this._state[e]),t.__calling=!1),{cancel:function(){var n=i[e].indexOf(t);~n&&i[e].splice(n,1)}}}function g(e){for(;e&&e.length;)e.pop()()}var v={destroy:p,get:b,fire:function(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},observe:_,on:function(e,t){if("teardown"===e)return this.on("destroy",t);var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},set:function(e){this._set(t({},e)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:p,_recompute:e,_set:function(e){var n=this._state,i={},s=!1;for(var r in e)f(e[r],n[r])&&(i[r]=s=!0);s&&(this._state=t({},n,e),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(m(this,this._observers.pre,i,this._state,n),this._fragment.p(i,this._state),m(this,this._observers.post,i,this._state,n)))},_mount:function(e,t){this._fragment.m(e,t)},_unmount:function(){this._fragment&&this._fragment.u()}};function w(e,t,n,i){window.fetch(e,{credentials:"include",method:t,mode:"cors",body:n}).then(function(e){if(200!=e.status)return new Error(e.statusText);try{return e.json()}catch(t){return e.text()}}).then(i).catch(function(e){console.error(e)})}var y=[100,200,300,400,500,700,800,900,1e3];var N=0;var T={publish:function(){var e=this;if(window.chart.save){var t,n,i,s,r,a=e.get("chart");e.set({publishing:!0,progress:0,publish_error:!1}),a.metadata.publish["embed-heights"]=(e.get("embed_templates"),t={},n=window.$,i=n(n("#iframe-vis")[0].contentDocument),s=n("h1",i).height()+n(".chart-intro",i).height()+n(".dw-chart-notes",i).height(),r=n("#iframe-vis").height(),y.forEach(function(e){i.find("h1,.chart-intro,.dw-chart-notes").css("width",e+"px");var a=n("h1",i).height()+n(".chart-intro",i).height()+n(".dw-chart-notes",i).height();t[e]=r+(a-s)}),t),e.set({chart:a}),window.chart.attributes(a).save().then(function(t){w("/api/charts/"+a.id+"/publish","POST",null,function(t){"ok"==t.status?e.publishFinished(t.data):e.set({publish_error:t.message})}),N=0,e.updateStatus()})}else setTimeout(function(){e.publish()},100)},updateProgressBar:function(e){this.refs.bar&&(this.refs.bar.style.width=(100*e).toFixed()+"%")},updateStatus:function(){var e=this,t=e.get("chart");N+=.05,w("/api/charts/"+t.id+"/publish/status","GET",null,function(t){t&&(t=+t/100+N,e.set({progress:Math.min(1,t)})),e.get("publishing")&&setTimeout(function(){e.updateStatus()},400)})},publishFinished:function(e){var t=this;this.set({progress:1,published:!0,needs_republish:!1}),setTimeout(function(){return t.set({publishing:!1})},500),this.set({chart:e}),window.chart.attributes(e)},copy:function(e){var t=this;console.log("COPY",e),t.refs.embedInput.select();try{document.execCommand("copy")&&(t.set({copy_success:!0}),setTimeout(function(){return t.set({copy_success:!1})},300))}catch(e){}}};function H(e){!function(e,t,n){e.setAttribute(t,n)}(e,"svelte-2615052596","")}function L(t,n){var r;return{c:function(){r=u("p")},m:function(e,t){i(r,e,t),r.innerHTML="Dieses Diagramm wurde bereits veröffentlicht. Wenn du weitere Änderungen vornimmst, musst du das Diagramm hier erneut veröffentlichen."},u:function(){r.innerHTML="",s(r)},d:e}}function M(t,n){var r;return{c:function(){r=u("p"),this.h()},h:function(){h(r,"margin-bottom","20px")},m:function(e,t){i(r,e,t),r.innerHTML="Um dein Diagramm zu teilen oder einzubetten musst du es veröffentlichen. Es wird nur für Personen sichtbar sein, die die URL des Diagramms kennen."},u:function(){r.innerHTML="",s(r)},d:e}}function k(t,r){var a,c,l,h,d,p;return{c:function(){a=u("span"),c=u("i"),h=o(" "),d=u("span"),p=o("Erneut veröffentlichen"),this.h()},h:function(){H(c),c.className=l="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":""),H(d),d.className="title",a.className="re-publish"},m:function(e,t){i(a,e,t),n(c,a),n(h,a),n(d,a),n(p,d)},p:function(e,t){e.publishing&&l!==(l="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":""))&&(c.className=l)},u:function(){s(a)},d:e}}function C(t,r){var a,c,l,h,d,p;return{c:function(){a=u("span"),c=u("i"),h=o(" "),d=u("span"),p=o("Veröffentlichen"),this.h()},h:function(){H(c),c.className=l="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload"),H(d),d.className="title",a.className="publish"},m:function(e,t){i(a,e,t),n(c,a),n(h,a),n(d,a),n(p,d)},p:function(e,t){e.publishing&&l!==(l="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload"))&&(c.className=l)},u:function(){s(a)},d:e}}function D(t,r){var a,c,l,h;return{c:function(){a=u("div"),(c=u("div")).innerHTML='<i class="fa fa-chevron-left"></i>',l=o("\n    "),h=u("div"),this.h()},h:function(){H(a),H(c),c.className="arrow",H(h),h.className="text",a.className="publish-intro"},m:function(e,t){i(a,e,t),n(c,a),n(l,a),n(h,a),h.innerHTML="Klicke hier wenn du dein Diagramm auf deiner <b>Website<b> oder <b>CMS</b> einbetten willst."},u:function(){h.innerHTML="",s(a)},d:e}}function x(t,n){var r;return{c:function(){r=u("div"),this.h()},h:function(){H(r),r.className="btn-aside alert"},m:function(e,t){i(r,e,t),r.innerHTML="Dein Diagramm wurde geändert nachdem es veröffentlicht wurde. Du musst es <b>erneut veröffentlichen</b> damit die Änderungen wirksam werden."},u:function(){r.innerHTML="",s(r)},d:e}}function E(t,n){var r;return{c:function(){r=u("div"),this.h()},h:function(){r.className="alert alert-success"},m:function(e,t){i(r,e,t),r.innerHTML="Glückwunsch, das Diagramm kann jetzt geteilt und eingebettet werden."},u:function(){r.innerHTML="",s(r)},d:e}}function U(t,n){var r;return{c:function(){r=u("div"),this.h()},h:function(){r.className="alert alert-error"},m:function(e,n){i(r,e,n),r.innerHTML=t.publish_error},p:function(e,t){e.publish_error&&(r.innerHTML=t.publish_error)},u:function(){r.innerHTML="",s(r)},d:e}}function G(e,t){var r,a,c,l,h,d,p;return{c:function(){r=u("div"),a=o("Dein Diagramm wird jetzt für die Veröffentlichung vorbereitet. In wenigen Sekunden erhältst du einen Link für die Einbettung. "),c=o("\n    "),l=u("div"),h=u("div"),this.h()},h:function(){H(r),H(l),H(h),h.className=d="bar "+(e.progress<1?"":"bar-success"),l.className="progress progress-striped active",r.className=p="alert "+(e.progress<1?"alert-info":"alert-success")+" publishing"},m:function(e,s){i(r,e,s),n(a,r),n(c,r),n(l,r),n(h,l),t.refs.bar=h},p:function(e,t){e.progress&&d!==(d="bar "+(t.progress<1?"":"bar-success"))&&(h.className=d),e.progress&&p!==(p="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing")&&(r.className=p)},u:function(){s(r)},d:function(){t.refs.bar===h&&(t.refs.bar=null)}}}function S(e,t,a,h,d){var p,f,m,b,_,g=a.name;function v(){d.set({shareurl_type:f.__value})}return{c:function(){p=u("label"),f=u("input"),b=o(" "),_=u("noscript"),this.h()},h:function(){H(f),d._bindingGroups[0].push(f),c(f,"change",v),f.__value=m=a.id,f.value=f.__value,f.type="radio",f.name="url-type",p.className="radio"},m:function(t,s){i(p,t,s),n(f,p),f.checked=f.__value===e.shareurl_type,n(b,p),n(_,p),_.insertAdjacentHTML("afterend",g)},p:function(e,t,n,i,s){f.checked=f.__value===t.shareurl_type,e.plugin_shareurls&&m!==(m=i.id)&&(f.__value=m),f.value=f.__value,e.plugin_shareurls&&g!==(g=i.name)&&(r(_),_.insertAdjacentHTML("afterend",g))},u:function(){r(_),s(p)},d:function(){d._bindingGroups[0].splice(d._bindingGroups[0].indexOf(f),1),l(f,"change",v)}}}function j(e,t,a,h,d){var p,f,m,b,_,g=a.title;function v(){d.set({embed_type:f.__value})}return{c:function(){p=u("label"),f=u("input"),b=o(" "),_=u("noscript"),this.h()},h:function(){H(f),d._bindingGroups[1].push(f),c(f,"change",v),f.type="radio",f.__value=m=a.id,f.value=f.__value,p.className="radio"},m:function(t,s){i(p,t,s),n(f,p),f.checked=f.__value===e.embed_type,n(b,p),n(_,p),_.insertAdjacentHTML("afterend",g)},p:function(e,t,n,i,s){f.checked=f.__value===t.embed_type,e.embed_templates&&m!==(m=i.id)&&(f.__value=m),f.value=f.__value,e.embed_templates&&g!==(g=i.title)&&(r(_),_.insertAdjacentHTML("afterend",g))},u:function(){r(_),s(p)},d:function(){d._bindingGroups[1].splice(d._bindingGroups[1].indexOf(f),1),l(f,"change",v)}}}function P(t,a,c,l,h){var d,p,f,m,b,_,g=c.title,v=c.text;return{c:function(){d=u("div"),p=u("b"),f=o(g),m=o(":"),b=o(" "),_=u("noscript")},m:function(e,t){i(d,e,t),n(p,d),n(f,p),n(m,p),n(b,d),n(_,d),_.insertAdjacentHTML("afterend",v)},p:function(e,t,n,i,s){e.embed_templates&&g!==(g=i.title)&&(f.data=g),e.embed_templates&&v!==(v=i.text)&&(r(_),_.insertAdjacentHTML("afterend",v))},u:function(){r(_),s(d)},d:e}}function O(e){return e.published?L:M}function A(e){return e.published?k:C}function B(e){!function(e,t){e._observers={pre:d(),post:d()},e._handlers=d(),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}(this,e),this.refs={},this._state=t({},e.data),this._recompute({shareurl_type:1,chart:1,plugin_shareurls:1,published:1,embed_type:1},this._state),this._bindingGroups=[[],[]];var p=function(){var e=this;e.observe("publishing",function(t){t&&e.updateProgressBar(e.get("progress"))}),e.observe("progress",function(t){e.updateProgressBar(t)}),e.observe("embed_type",function(e){var t=window.dw.backend.__userData;e&&t&&(t.embed_type=e,window.dw.backend.setUserData(t))}),e.observe("shareurl_type",function(e){var t=window.dw.backend.__userData;e&&t&&(t.shareurl_type=e,window.dw.backend.setUserData(t))}),e.observe("published",function(e){window.document.querySelector(".dw-create-publish .publish-step").classList[e?"add":"remove"]("is-published")});var t=!0;e.observe("auto_publish",function(n){n&&t&&(e.publish(),t=!1,window.history.replaceState("","",location.pathname))})}.bind(this);e.root?this.root._oncreate.push(p):this._oncreate=[p],this._fragment=function(e,t){var d,p,f,m,b,_,g,v,w,y,N,T,L,M,k,C,B,I,z,F,V,W,$,q,K,R,Y,J,Q,X,Z,ee,te,ne,ie,se,re,ae,ue,oe,ce,le,he,de,pe,fe,me,be,_e,ge,ve,we,ye,Ne,Te,He,Le,Me,ke,Ce,De,xe,Ee,Ue=O(e),Ge=Ue(e,t),Se=A(e),je=Se(e,t);function Pe(e){t.publish()}var Oe=!e.published&&D(),Ae=e.needs_republish&&!e.publishing&&x(),Be=e.published&&!e.needs_republish&&1==e.progress&&!e.publishing&&E(),Ie=e.publish_error&&U(e),ze=e.publishing&&G(e,t);function Fe(){t.set({shareurl_type:W.__value})}for(var Ve=e.plugin_shareurls,We=[],$e=0;$e<Ve.length;$e+=1)We[$e]=S(e,0,Ve[$e],0,t);var qe=e.embed_templates,Ke=[];for($e=0;$e<qe.length;$e+=1)Ke[$e]=j(e,0,qe[$e],0,t);function Re(e){var n=t.get();t.copy(n.embedCode)}var Ye=e.embed_templates.slice(2),Je=[];for($e=0;$e<Ye.length;$e+=1)Je[$e]=P(0,0,Ye[$e]);return{c:function(){Ge.c(),d=o("\n\n"),p=u("button"),je.c(),m=o("\n\n\n"),Oe&&Oe.c(),b=o("\n\n\n"),Ae&&Ae.c(),_=o("\n"),Be&&Be.c(),g=o("\n\n"),Ie&&Ie.c(),v=o("\n\n"),ze&&ze.c(),w=o("\n\n"),y=u("div"),N=u("h2"),T=o("\n    "),L=u("div"),M=u("i"),k=o("\n        "),C=u("div"),B=u("div"),I=u("b"),z=o("\n                "),F=u("div"),V=u("label"),W=u("input"),$=o(" "),q=u("noscript"),K=o("\n                    ");for(var t=0;t<We.length;t+=1)We[t].c();for(R=o("\n            "),Y=u("div"),J=u("a"),Q=o(e.shareUrl),X=o("\n        "),Z=u("div"),(ee=u("span")).textContent="?",te=o("\n            "),ne=u("div"),ie=o("\n\n    "),se=u("div"),re=u("i"),ae=o("\n        "),ue=u("div"),oe=u("div"),ce=u("b"),le=o("\n                "),he=u("div"),t=0;t<Ke.length;t+=1)Ke[t].c();for(de=o("\n            "),pe=u("div"),fe=u("input"),me=o(" "),be=u("button"),_e=u("i"),ge=o(" "),ve=o("kopieren"),we=o("\n                "),ye=u("div"),Ne=o("Der Code wurde kopiert!"),He=o("\n        "),Le=u("div"),(Me=u("span")).textContent="?",ke=o("\n            "),Ce=u("div"),De=u("noscript"),xe=o("\n                "),t=0;t<Je.length;t+=1)Je[t].c();this.h()},h:function(){H(p),p.disabled=e.publishing,p.className=f="btn-publish btn btn-primary btn-large "+(e.published?"":"btn-first-publish"),c(p,"click",Pe),M.className="icon fa fa-link fa-fw",H(F),H(W),t._bindingGroups[0].push(W),c(W,"change",Fe),W.__value="default",W.value=W.__value,W.type="radio",W.name="url-type",V.className="radio",F.className="embed-options",B.className="h",H(J),J.target="_blank",J.className="share-url",J.href=e.shareUrl,Y.className="inpt",C.className="ctrls",ne.className="content",Z.className="help",L.className="block",re.className="icon fa fa-code fa-fw",H(he),he.className="embed-options",oe.className="h",fe.type="text",fe.className="input embed-code",fe.readOnly=!0,fe.value=e.embedCode,_e.className="fa fa-copy",be.className="btn btn-copy",be.title="copy",c(be,"click",Re),H(ye),ye.className=Te="copy-success "+(e.copy_success?"show":""),pe.className="inpt",ue.className="ctrls",Ce.className="content",Le.className="help",se.className="block",h(y,"margin-top","20px"),y.className=Ee=e.published?"":"inactive"},m:function(s,r){Ge.m(s,r),i(d,s,r),i(p,s,r),je.m(p,null),i(m,s,r),Oe&&Oe.m(s,r),i(b,s,r),Ae&&Ae.m(s,r),i(_,s,r),Be&&Be.m(s,r),i(g,s,r),Ie&&Ie.m(s,r),i(v,s,r),ze&&ze.m(s,r),i(w,s,r),i(y,s,r),n(N,y),N.innerHTML="Teilen & Einbetten",n(T,y),n(L,y),n(M,L),n(k,L),n(C,L),n(B,C),n(I,B),I.innerHTML="Diagramm per URL teilen",n(z,B),n(F,B),n(V,F),n(W,V),W.checked=W.__value===e.shareurl_type,n($,V),n(q,V),q.insertAdjacentHTML("afterend","Vollbild"),n(K,F);for(var a=0;a<We.length;a+=1)We[a].m(F,null);for(n(R,C),n(Y,C),n(J,Y),n(Q,J),n(X,L),n(Z,L),n(ee,Z),n(te,Z),n(ne,Z),ne.innerHTML="Bei <b>normale Größe</b> wird das Diagramm genau so dargestellt, wie es erstellt wurde. Bei <b>Vollbild</b> füllt das Diagramm das komplette Browser-Fenser.",n(ie,y),n(se,y),n(re,se),n(ae,se),n(ue,se),n(oe,ue),n(ce,oe),ce.innerHTML="Einbett-Code kopieren",n(le,oe),n(he,oe),a=0;a<Ke.length;a+=1)Ke[a].m(he,null);for(n(de,ue),n(pe,ue),n(fe,pe),t.refs.embedInput=fe,n(me,pe),n(be,pe),n(_e,be),n(ge,be),n(ve,be),n(we,pe),n(ye,pe),n(Ne,ye),n(He,se),n(Le,se),n(Me,Le),n(ke,Le),n(Ce,Le),n(De,Ce),De.insertAdjacentHTML("beforebegin","Kopiere diesen HTML Code in deine Webseite oder CMS, um dein Diagramm einzubetten. Der <b>responsive</b> Iframe passt sich automatisch der Höhe der Überschrift auf verschiedenen Geräten an."),n(xe,Ce),a=0;a<Je.length;a+=1)Je[a].m(Ce,null)},p:function(e,n){Ue!==(Ue=O(n))&&(Ge.u(),Ge.d(),(Ge=Ue(n,t)).c(),Ge.m(d.parentNode,d)),Se===(Se=A(n))&&je?je.p(e,n):(je.u(),je.d(),(je=Se(n,t)).c(),je.m(p,null)),e.publishing&&(p.disabled=n.publishing),e.published&&f!==(f="btn-publish btn btn-primary btn-large "+(n.published?"":"btn-first-publish"))&&(p.className=f),n.published?Oe&&(Oe.u(),Oe.d(),Oe=null):Oe||((Oe=D()).c(),Oe.m(b.parentNode,b)),n.needs_republish&&!n.publishing?Ae||((Ae=x()).c(),Ae.m(_.parentNode,_)):Ae&&(Ae.u(),Ae.d(),Ae=null),!n.published||n.needs_republish||1!=n.progress||n.publishing?Be&&(Be.u(),Be.d(),Be=null):Be||((Be=E()).c(),Be.m(g.parentNode,g)),n.publish_error?Ie?Ie.p(e,n):((Ie=U(n)).c(),Ie.m(v.parentNode,v)):Ie&&(Ie.u(),Ie.d(),Ie=null),n.publishing?ze?ze.p(e,n):((ze=G(n,t)).c(),ze.m(w.parentNode,w)):ze&&(ze.u(),ze.d(),ze=null),W.checked=W.__value===n.shareurl_type;var i=n.plugin_shareurls;if(e.shareurl_type||e.plugin_shareurls){for(var s=0;s<i.length;s+=1)We[s]?We[s].p(e,n,i,i[s],s):(We[s]=S(n,0,i[s],0,t),We[s].c(),We[s].m(F,null));for(;s<We.length;s+=1)We[s].u(),We[s].d();We.length=i.length}e.shareUrl&&(Q.data=n.shareUrl,J.href=n.shareUrl);var r=n.embed_templates;if(e.embed_type||e.embed_templates){for(s=0;s<r.length;s+=1)Ke[s]?Ke[s].p(e,n,r,r[s],s):(Ke[s]=j(n,0,r[s],0,t),Ke[s].c(),Ke[s].m(he,null));for(;s<Ke.length;s+=1)Ke[s].u(),Ke[s].d();Ke.length=r.length}e.embedCode&&(fe.value=n.embedCode),e.copy_success&&Te!==(Te="copy-success "+(n.copy_success?"show":""))&&(ye.className=Te);var a=n.embed_templates.slice(2);if(e.embed_templates){for(s=0;s<a.length;s+=1)Je[s]?Je[s].p(e,n,a,a[s],s):(Je[s]=P(0,0,a[s]),Je[s].c(),Je[s].m(Ce,null));for(;s<Je.length;s+=1)Je[s].u(),Je[s].d();Je.length=a.length}e.published&&Ee!==(Ee=n.published?"":"inactive")&&(y.className=Ee)},u:function(){N.innerHTML="",I.innerHTML="",r(q),ne.innerHTML="",ce.innerHTML="",function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(De),Ge.u(),s(d),s(p),je.u(),s(m),Oe&&Oe.u(),s(b),Ae&&Ae.u(),s(_),Be&&Be.u(),s(g),Ie&&Ie.u(),s(v),ze&&ze.u(),s(w),s(y);for(var e=0;e<We.length;e+=1)We[e].u();for(e=0;e<Ke.length;e+=1)Ke[e].u();for(e=0;e<Je.length;e+=1)Je[e].u()},d:function(){Ge.d(),je.d(),l(p,"click",Pe),Oe&&Oe.d(),Ae&&Ae.d(),Be&&Be.d(),Ie&&Ie.d(),ze&&ze.d(),t._bindingGroups[0].splice(t._bindingGroups[0].indexOf(W),1),l(W,"change",Fe),a(We),a(Ke),t.refs.embedInput===fe&&(t.refs.embedInput=null),l(be,"click",Re),a(Je)}}}(this._state,this),e.target&&(this._fragment.c(),this._fragment.m(e.target,e.anchor||null),g(this._oncreate))}function I(e){this._observers={pre:d(),post:d()},this._changeHandlers=[],this._dependents=[],this._computed=d(),this._sortedComputedProperties=[],this._state=t({},e)}t(B.prototype,T,v),B.prototype._recompute=function(e,t){var n,i;(e.shareurl_type||e.chart||e.plugin_shareurls||e.published)&&f(t.shareUrl,t.shareUrl=function(e,t,n,i){if(!i)return"https://www.datawrapper.de/...";if("default"==e)return t.publicUrl;var s="";return n.forEach(function(n){n.id==e&&(s=n.url.replace(/%chart_id%/g,t.id))}),s}(t.shareurl_type,t.chart,t.plugin_shareurls,t.published))&&(e.shareUrl=!0),(e.embed_type||e.chart)&&f(t.embedCode,t.embedCode=(n=t.embed_type,(i=t.chart).metadata?i.metadata.publish&&!i.metadata.publish["embed-codes"]?'<iframe src="'+i.publicUrl+'" width="100%" height="'+i.metadata.publish["embed-height"]+'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>':i.metadata.publish["embed-codes"]["embed-method-"+n]:""))&&(e.embedCode=!0)},t(I.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n];t["$"+i]=this._state[i]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_sortComputedProperties:function(){var e,t=this._computed,n=this._sortedComputedProperties=[],i=d();function s(r){if(e[r])throw new Error("Cyclical dependency detected");if(!i[r]){i[r]=!0;var a=t[r];a&&(e[r]=!0,a.deps.forEach(s),n.push(a))}}for(var r in this._computed)e=d(),s(r)},compute:function(e,t,n){var i,s={deps:t,update:function(s,r,a){var u=t.map(function(e){return e in r&&(a=!0),s[e]});if(a){var o=n.apply(null,u);f(o,i)&&(i=o,r[e]=!0,s[e]=i)}}};s.update(this._state,{},!0),this._computed[e]=s,this._sortComputedProperties()},get:b,observe:_,onchange:function(e){return this._changeHandlers.push(e),{cancel:function(){var t=this._changeHandlers.indexOf(e);~t&&this._changeHandlers.splice(t,1)}}},set:function(e){var n=this._state,i=this._changed={},s=!1;for(var r in e){if(this._computed[r])throw new Error("'"+r+"' is a read-only property");f(e[r],n[r])&&(i[r]=s=!0)}if(s){this._state=t({},n,e);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,i);for(a=0;a<this._changeHandlers.length;a+=1)this._changeHandlers[a](this._state,i);m(this,this._observers.pre,i,this._state,n);var u=this._dependents.slice();for(a=0;a<u.length;a+=1){var o=u[a],c={};s=!1;for(var l=0;l<o.props.length;l+=1){var h=o.props[l];h in i&&(c["$"+h]=this._state[h],s=!0)}s&&o.component.set(c)}m(this,this._observers.post,i,this._state,n)}}});var z=new I({});return new B({target:document.querySelector(".svelte-publish"),store:z,data:{chart:{id:""},embed_templates:[],plugin_shareurls:[],published:!1,publishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:0,shareurl_type:"default",embed_type:"responsive",copy_success:!1}})}();
