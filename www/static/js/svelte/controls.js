!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e){e.appendChild(t)}function i(t,e,n){e.insertBefore(t,n)}function a(t){t.parentNode.removeChild(t)}function s(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function l(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function c(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function r(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}function u(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function h(){return document.createDocumentFragment()}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return document.createComment("")}function v(t,e,n){t.addEventListener(e,n,!1)}function m(t,e,n){t.removeEventListener(e,n,!1)}function g(t,e,n){t.setAttribute(e,n)}function b(t){return""===t?void 0:+t}function x(t,e,n){t.style.setProperty(e,n)}function y(t,e){for(var n=0;n<t.options.length;n+=1){var o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function k(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function N(t){return t}function w(t,e,n,o,i,a){var s,l=n(e,o),c=l.duration||300,r=l.easing||N;if(l.css&&!C.stylesheet){var u=d("style");document.head.appendChild(u),C.stylesheet=u.sheet}return i&&(l.css&&l.delay&&(s=e.style.cssText,e.style.cssText+=l.css(0)),l.tick&&l.tick(0)),{t:i?0:1,running:!1,program:null,pending:null,run:function(t,e){var n={start:window.performance.now()+(l.delay||0),intro:t,callback:e};l.delay?this.pending=n:this.start(n),this.running||(this.running=!0,C.add(this))},start:function(n){t.fire(n.intro?"intro.start":"outro.start",{node:e}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=c*Math.abs(n.b-n.a),n.end=n.start+n.duration,l.css&&(l.delay&&(e.style.cssText=s),n.rule=function(t,e,n,o,i,a){for(var s="{\n",l=0;l<=1;l+=16.666/o)s+=100*l+"%{"+a(t+n*i(l))+"}\n";return s+"100% {"+a(e)+"}\n}"}(n.a,n.b,n.delta,n.duration,r,l.css),C.addRule(n.rule,n.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(n.rule)),e.style.animation=(e.style.animation||"").split(", ").filter(function(t){return t&&(n.delta<0||!/__svelte/.test(t))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*r(n/e.duration),l.tick&&l.tick(this.t)}},done:function(){var t=this.program;this.t=t.b,l.tick&&l.tick(this.t),l.css&&C.deleteRule(e,t.name),t.callback(),t=null,this.running=!!this.pending},abort:function(){l.tick&&l.tick(1),l.css&&C.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1}}}t=t&&t.hasOwnProperty("default")?t.default:t;var C={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(e=this.stylesheet.cssRules.length;e--;)this.stylesheet.deleteRule(e);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return-1===t.indexOf(e)}).join(", ")}};function M(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function T(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function L(t){for(;t&&t.length;)t.shift()()}function j(){this.store._remove(this)}var H={destroy:M,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1){var i=n[o];i.__calling||(i.__calling=!0,i.call(this,e),i.__calling=!1)}},observe:function(t,e,n){var o=e.bind(this);return n&&!1===n.init||o(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&o(e.current[t],e.previous&&e.previous[t])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,L(this.root._beforecreate),L(this.root._oncreate),L(this.root._aftercreate),this.root._lock=!1)},teardown:M,_recompute:e,_set:function(t){var e=this._state,o={},i=!1;for(var a in t)this._differs(t[a],e[a])&&(o[a]=i=!0);i&&(this._state=n(n({},e),t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(this.fire("state",{changed:o,current:this._state,previous:e}),this._fragment.p(o,this._state),this.fire("update",{changed:o,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function $(t){T(this,t),this._state=n({disabled:!1,faded:!1},t.data),this._fragment=function(t,e){var n,s,l,c,r,u;function h(){t.set({value:l.checked})}return{c:function(){n=d("div"),s=d("label"),l=d("input"),c=f("Â "),r=f(e.label),this.h()},h:function(){v(l,"change",h),g(l,"type","checkbox"),l.disabled=e.disabled,l.className="svelte-c3c81a",s.className=u="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-c3c81a",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(t,a){i(n,t,a),o(s,n),o(l,s),l.checked=e.value,o(c,s),o(r,s)},p:function(t,e){l.checked=e.value,t.disabled&&(l.disabled=e.disabled),t.label&&(r.data=e.label),(t.disabled||t.faded)&&u!==(u="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-c3c81a")&&(s.className=u)},u:function(){a(n)},d:function(){m(l,"change",h)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n($.prototype,H);var S=Array.prototype,I=Object.prototype,A=S.slice,z=I.toString,E=I.hasOwnProperty,O=Array.isArray,D=Object.keys;function q(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function F(t,e){return null!=t&&E.call(t,e)}function Y(t){if(!q(t))return[];if(D)return D(t);var e=[];for(var n in t)F(t,n)&&e.push(n);return et&&ot(t,e),e}var R=O||function(t){return"[object Array]"===z.call(t)};var K=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===z.call(t)};!function(){z.call(arguments)}();function P(t){return function(t){return"[object Number]"===z.call(t)}(t)&&isNaN(t)}var B=J;function Q(t){return t}var G=it(Y);function W(t){return t=G({},t),function(e){return function(t,e){var n=Y(e),o=n.length;if(null==t)return!o;for(var i=Object(t),a=0;a<o;a++){var s=n[a];if(e[s]!==i[s]||!(s in i))return!1}return!0}(e,t)}}function J(t,e){return U(t,e,1/0)}function U(t,e,n){return B!==J?B(t,e):null==t?Q:K(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,o,i){return t.call(e,n,o,i)};case 4:return function(n,o,i,a){return t.call(e,n,o,i,a)}}return function(){return t.apply(e,arguments)}}(t,e,n):q(t)?W(t):V(t)}function V(t){return function(e){return null==e?void 0:e[t]}}var X=Math.pow(2,53)-1,Z=V("length"),tt=function(t){var e=Z(t);return"number"==typeof e&&e>=0&&e<=X};var et=!{toString:null}.propertyIsEnumerable("toString"),nt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function ot(t,e){var n=nt.length,o=t.constructor,i=K(o)&&o.prototype||I,a="constructor";for(F(t,a)&&!ct(e,a)&&e.push(a);n--;)(a=nt[n])in t&&t[a]!==i[a]&&!ct(e,a)&&e.push(a)}function it(t,e){return function(n){var o=arguments,i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var a=1;a<i;a++)for(var s=o[a],l=t(s),c=l.length,r=0;r<c;r++){var u=l[r];!q(n)||e&&void 0!==n[u]||(n[u]=s[u])}return n}}!function(t){for(var e={},n=Y(t),o=0,i=n.length;o<i;o++)e[t[n[o]]]=n[o]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var at,st=(at=1,function(t,e,n){e=U(e,n);for(var o=Z(t),i=at>0?0:o-1;i>=0&&i<o;i+=at)if(e(t[i],i,t))return i;return-1});var lt=function(t,e,n){return function(o,i,a){var s=0,l=Z(o);if("number"==typeof a)t>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(n&&a&&l)return o[a=n(o,i)]===i?a:-1;if(i!=i)return(a=e(A.call(o,s,l),P))>=0?a+s:-1;for(a=t>0?s:l-1;a>=0&&a<l;a+=t)if(o[a]===i)return a;return-1}}(1,st,function(t,e,n,o){for(var i=(n=U(n,o,1))(e),a=0,s=Z(t);a<s;){var l=Math.floor((a+s)/2);n(t[l])<i?a=l+1:s=l}return a});function ct(t,e,n,o){return tt(t)||(t=function(t){for(var e=Y(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=t[e[i]];return o}(t)),("number"!=typeof n||o)&&(n=0),lt(t,e,n)>=0}function rt(t,e,n,o){var i;!0!==(i=e)&&!1!==i&&"[object Boolean]"!==z.call(i)&&(o=n,n=e,e=!1),null!=n&&(n=U(n,o));for(var a=[],s=[],l=0,c=Z(t);l<c;l++){var r=t[l],u=n?n(r,l,t):r;e?(l&&s===u||a.push(r),s=u):n?ct(s,u)||(s.push(u),a.push(r)):ct(a,r)||a.push(r)}return a}function ut(t,n){var o,s,l,c=t._slotted.content;return{c:function(){c||(l=f("Content"))},m:function(t,e){c?(i(o||(o=p()),t,e),i(c,t,e),i(s||(s=p()),t,e)):i(l,t,e)},u:function(){c?(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(o,s,c),a(o),a(s)):a(l)},d:e}}function ht(t){T(this,t),this.refs={},this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l,c,u=t._slotted.button;function h(e){t.windowClick(e)}function p(e){t.toggle()}window.addEventListener("click",h);var _=e.visible&&ut(t);return{c:function(){n=d("div"),s=d("div"),u||(l=f("Button")),c=f("\n    "),_&&_.c(),this.h()},h:function(){v(s,"click",p),s.className="base-drop-btn svelte-1e7v6nx",x(n,"position","relative"),x(n,"display","inline-block")},m:function(e,a){i(n,e,a),o(s,n),o(u||l,s),t.refs.button=s,o(c,n),_&&_.m(n,null)},p:function(e,o){o.visible?_||((_=ut(t)).c(),_.m(n,null)):_&&(_.u(),_.d(),_=null)},u:function(){a(n),u&&r(s,u),_&&_.u()},d:function(){window.removeEventListener("click",h),m(s,"click",p),t.refs.button===s&&(t.refs.button=null),_&&_.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function dt(e){return"#ffffff"==t(e).hex("rgb")?"#eeeeee":e}function ft(e){return t(e).alpha()}n(ht.prototype,H),n(ht.prototype,{toggle:function(){var t=this.get().visible;this.set({visible:!t})},windowClick:function(t){t.target&&t.target!=this.refs.button&&(t.target.classList.contains("hex")||this.set({visible:!1}))}});function pt(e){var n=this,o=e.changed,i=e.current,a=e.previous;if(o.color)try{var s=t(i.color).hex();this.refs.dropdown.get().visible&&s!=a.color&&this.fire("change",i.validColor),i.validColor!=i.color&&setTimeout(function(){n.set({color:i.validColor})},100)}catch(t){}}function vt(e,n){var o=-1,i=999999;return e[0]==e[1]?"-":(e.forEach(function(e,a){var s=t.distance(e,n,"lab");s<i&&(i=s,o=a)}),e[o])}function _t(t,e,n,o,i){var a=[t],s=e/n,l=0;for(o=void 0===o?n:o,i=i||1;n-- >0;)l+=s,a.unshift(t-l),o-- >0&&a.push(t+l);return a}function mt(t,e){var n,s,l,c=e.c;e.each_value,e.c_index;return{c:function(){n=d("div"),s=d("div"),this.h()},h:function(){s.className="transparency svelte-1ol53cr",x(s,"opacity",1-ft(c)),v(n,"click",kt),v(n,"dblclick",Nt),n.className="color svelte-1ol53cr",n.dataset.color=l=c,x(n,"background",c),x(n,"border-color",dt(c)),n._svelte={component:t,each_value:e.each_value,c_index:e.c_index}},m:function(t,e){i(n,t,e),o(s,n)},p:function(t,e){c=e.c,e.each_value,e.c_index,t.palette&&x(s,"opacity",1-ft(c)),t.palette&&l!==(l=c)&&(n.dataset.color=l),t.palette&&(x(n,"background",c),x(n,"border-color",dt(c))),n._svelte.each_value=e.each_value,n._svelte.c_index=e.c_index},u:function(){a(n)},d:function(){m(n,"click",kt),m(n,"dblclick",Nt)}}}function gt(t,e){var n,o,s,l=e.c;e.each_value_1,e.c_index_1;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",wt),n.className=o="color "+(l==e.nearest_l?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_1:e.each_value_1,c_index_1:e.c_index_1}},m:function(t,e){i(n,t,e)},p:function(t,e){l=e.c,e.each_value_1,e.c_index_1,(t.gradient_l||t.nearest_l)&&o!==(o="color "+(l==e.nearest_l?"selected":"")+" svelte-1ol53cr")&&(n.className=o),t.gradient_l&&s!==(s=l)&&(n.dataset.color=s),t.gradient_l&&x(n,"background",l),n._svelte.each_value_1=e.each_value_1,n._svelte.c_index_1=e.c_index_1},u:function(){a(n)},d:function(){m(n,"click",wt)}}}function bt(t,e){var n,o,s,l=e.c;e.each_value_2,e.c_index_2;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",Ct),n.className=o="color "+(l==e.nearest_c?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_2:e.each_value_2,c_index_2:e.c_index_2}},m:function(t,e){i(n,t,e)},p:function(t,e){l=e.c,e.each_value_2,e.c_index_2,(t.gradient_c||t.nearest_c)&&o!==(o="color "+(l==e.nearest_c?"selected":"")+" svelte-1ol53cr")&&(n.className=o),t.gradient_c&&s!==(s=l)&&(n.dataset.color=s),t.gradient_c&&x(n,"background",l),n._svelte.each_value_2=e.each_value_2,n._svelte.c_index_2=e.c_index_2},u:function(){a(n)},d:function(){m(n,"click",Ct)}}}function xt(t,e){var n,o,s,l=e.c;e.each_value_3,e.c_index_3;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",Mt),n.className=o="color "+(l==e.nearest_h?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_3:e.each_value_3,c_index_3:e.c_index_3}},m:function(t,e){i(n,t,e)},p:function(t,e){l=e.c,e.each_value_3,e.c_index_3,(t.gradient_h||t.nearest_h)&&o!==(o="color "+(l==e.nearest_h?"selected":"")+" svelte-1ol53cr")&&(n.className=o),t.gradient_h&&s!==(s=l)&&(n.dataset.color=s),t.gradient_h&&x(n,"background",l),n._svelte.each_value_3=e.each_value_3,n._svelte.c_index_3=e.c_index_3},u:function(){a(n)},d:function(){m(n,"click",Mt)}}}function yt(t,e){for(var s,l,c,r,h,p,_,b,y,k,N,w,C,M,T,L,j=!1,H=e.palette,$=[],S=0;S<H.length;S+=1)$[S]=mt(t,n(n({},e),{each_value:H,c:H[S],c_index:S}));var I=e.gradient_l,A=[];for(S=0;S<I.length;S+=1)A[S]=gt(t,n(n({},e),{each_value_1:I,c:I[S],c_index_1:S}));var z=e.gradient_c,E=[];for(S=0;S<z.length;S+=1)E[S]=bt(t,n(n({},e),{each_value_2:z,c:z[S],c_index_2:S}));var O=e.gradient_h,D=[];for(S=0;S<O.length;S+=1)D[S]=xt(t,n(n({},e),{each_value_3:O,c:O[S],c_index_3:S}));function q(){j=!0,t.set({color:N.value}),j=!1}function F(e){var n=t.get();t.setColor(n.color,!0)}function Y(t){t.stopPropagation()}return{c:function(){s=d("div"),l=d("div");for(var t=0;t<$.length;t+=1)$[t].c();c=f("\n\n                "),r=d("div");for(t=0;t<A.length;t+=1)A[t].c();h=f("\n                "),p=d("div");for(t=0;t<E.length;t+=1)E[t].c();_=f("\n                "),b=d("div");for(t=0;t<D.length;t+=1)D[t].c();y=f("\n\n                "),k=d("div"),N=d("input"),w=f("\n                    "),(C=d("button")).innerHTML='<i class="icon-ok"></i>',M=f("\n                    "),T=d("div"),L=d("div"),this.h()},h:function(){l.className="palette svelte-1ol53cr",r.className="color-axis lightness",p.className="color-axis saturation",b.className="color-axis hue",v(N,"input",q),g(N,"type","text"),x(N,"background",e.color),x(N,"border-color",dt),x(N,"color",e.textColor),N.className="hex svelte-1ol53cr",v(C,"click",F),C.className="btn btn-small ok",L.className="transparency svelte-1ol53cr",x(L,"opacity",1-ft(e.color)),T.className="color selected",x(T,"background",e.color),k.className="footer svelte-1ol53cr",v(s,"click",Y),s.className="color-selector svelte-1ol53cr"},m:function(t,n){i(s,t,n),o(l,s);for(var a=0;a<$.length;a+=1)$[a].m(l,null);o(c,s),o(r,s);for(a=0;a<A.length;a+=1)A[a].m(r,null);o(h,s),o(p,s);for(a=0;a<E.length;a+=1)E[a].m(p,null);o(_,s),o(b,s);for(a=0;a<D.length;a+=1)D[a].m(b,null);o(y,s),o(k,s),o(N,k),N.value=e.color,o(w,k),o(C,k),o(M,k),o(T,k),o(L,T)},p:function(e,o){var i=o.palette;if(e.palette){for(var a=0;a<i.length;a+=1){var s=n(n({},o),{each_value:i,c:i[a],c_index:a});$[a]?$[a].p(e,s):($[a]=mt(t,s),$[a].c(),$[a].m(l,null))}for(;a<$.length;a+=1)$[a].u(),$[a].d();$.length=i.length}var c=o.gradient_l;if(e.gradient_l||e.nearest_l){for(a=0;a<c.length;a+=1){var u=n(n({},o),{each_value_1:c,c:c[a],c_index_1:a});A[a]?A[a].p(e,u):(A[a]=gt(t,u),A[a].c(),A[a].m(r,null))}for(;a<A.length;a+=1)A[a].u(),A[a].d();A.length=c.length}var h=o.gradient_c;if(e.gradient_c||e.nearest_c){for(a=0;a<h.length;a+=1){var d=n(n({},o),{each_value_2:h,c:h[a],c_index_2:a});E[a]?E[a].p(e,d):(E[a]=bt(t,d),E[a].c(),E[a].m(p,null))}for(;a<E.length;a+=1)E[a].u(),E[a].d();E.length=h.length}var f=o.gradient_h;if(e.gradient_h||e.nearest_h){for(a=0;a<f.length;a+=1){var v=n(n({},o),{each_value_3:f,c:f[a],c_index_3:a});D[a]?D[a].p(e,v):(D[a]=xt(t,v),D[a].c(),D[a].m(b,null))}for(;a<D.length;a+=1)D[a].u(),D[a].d();D.length=f.length}j||(N.value=o.color),e.color&&x(N,"background",o.color),e.textColor&&x(N,"color",o.textColor),e.color&&(x(L,"opacity",1-ft(o.color)),x(T,"background",o.color))},u:function(){a(s);for(var t=0;t<$.length;t+=1)$[t].u();for(t=0;t<A.length;t+=1)A[t].u();for(t=0;t<E.length;t+=1)E[t].u();for(t=0;t<D.length;t+=1)D[t].u()},d:function(){u($),u(A),u(E),u(D),m(N,"input",q),m(C,"click",F),m(s,"click",Y)}}}function kt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!1)}function Nt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!0)}function wt(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.c_index_1];e.setColor(n,!1)}function Ct(t){var e=this._svelte.component,n=this._svelte.each_value_2[this._svelte.c_index_2];e.setColor(n,!1)}function Mt(t){var e=this._svelte.component,n=this._svelte.each_value_3[this._svelte.c_index_3];e.setColor(n,!1)}function Tt(t){T(this,t),this.refs={},this._state=n(n(this.store._init(["themeData"]),{palette:[],prepend:[],append:[],color:"#63c0de"}),t.data),this.store._add(this,["themeData"]),this._recompute({$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.state=[pt],this._handlers.destroy=[j],this._slotted=t.slots||{};var e,s,l,c,u,p,v,_,m,b,y,k,N,w,C,M,H=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=(e=this,s=this._state,w=e._slotted.default,C=s.color&&yt(e,s),M=new ht({root:e.root,slots:{default:h(),button:h(),content:h()}}),e.refs.dropdown=M,{c:function(){l=d("div"),c=f("\n        "),u=d("span"),w||(p=d("div"),v=d("div"),_=d("div"),m=f("\n                    "),b=d("span")),y=f("\n        "),k=d("span"),C&&C.c(),N=f("\n    "),M._fragment.c(),this.h()},h:function(){w||(_.className="transparency svelte-1ol53cr",x(_,"opacity",1-ft(s.validColor)),x(v,"background",s.validColor+" none repeat scroll 0% 0%"),v.className="the-color svelte-1ol53cr",b.className="caret svelte-1ol53cr",p.className="base-color-picker color-picker svelte-1ol53cr"),g(u,"slot","button"),g(k,"slot","content"),l.className="color-picker-cont svelte-1ol53cr"},m:function(t,e){i(l,t,e),o(c,M._slotted.default),o(u,M._slotted.button),w?o(w,u):(o(p,u),o(v,p),o(_,v),o(m,p),o(b,p)),o(y,M._slotted.default),o(k,M._slotted.content),C&&C.m(k,null),o(N,M._slotted.default),M._mount(l,null)},p:function(t,n){w||t.validColor&&(x(_,"opacity",1-ft(n.validColor)),x(v,"background",n.validColor+" none repeat scroll 0% 0%")),n.color?C?C.p(t,n):((C=yt(e,n)).c(),C.m(k,null)):C&&(C.u(),C.d(),C=null)},u:function(){a(l),w&&r(u,w),C&&C.u()},d:function(){C&&C.d(),M.destroy(!1),e.refs.dropdown===M&&(e.refs.dropdown=null)}}),this.root._oncreate.push(function(){var t={$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1,validColor:1,nearest_l:1,nearest_c:1,nearest_h:1,textColor:1};pt.call(H,{changed:t,current:H._state}),H.fire("update",{changed:t,current:H._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}function Lt(t){var e=t.$vis,n=t.customizable,o=t.axis,i=t.custom,a=t.palette;return e&&n?(o?_.unique(e.axes(!0)[o].values()):e.colorKeys?e.colorKeys():e.keys()).map(function(t){var e;return e=t,{key:t=dw.utils.purifyHtml(e,""),defined:void 0!==i[t],color:void 0!==i[t]?$t(i[t],a):"#cccccc"}}):[]}n(Tt.prototype,H),n(Tt.prototype,{setColor:function(t,e){this.set({color:t}),e&&this.refs.dropdown.set({visible:!1})}}),Tt.prototype._recompute=function(e,n){var o,i,a,s;(e.$themeData||e.prepend||e.append)&&this._differs(n.palette,n.palette=(i=(o=n).$themeData,a=o.prepend,s=o.append,rt(a.concat(i.colors.palette).concat(s))))&&(e.palette=!0),e.color&&(this._differs(n.validColor,n.validColor=function(e){var n=e.color;try{return t(n).hex()}catch(t){return"#000000"}}(n))&&(e.validColor=!0),this._differs(n.gradient_l,n.gradient_l=function(e){var n=e.color,o=t(n).lch(),i=_t(70,55,7,6).map(function(e){return t.lch(e,o[1],o[2]).hex()});return t.scale(["#000000"].concat(i).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)}(n))&&(e.gradient_l=!0)),(e.color||e.palette)&&this._differs(n.gradient_c,n.gradient_c=function(e){var n=e.color,o=e.palette,i=t(n).set("lch.c",120);isNaN(i.get("lch.h"))&&(i=t.lch(i.get("lch.l"),50,t(o[0]||"#d00").get("lch.h")));var a=t(n).set("lch.c",3);return t.scale([a,i]).mode("lch").gamma(1.2).colors(14)}(n))&&(e.gradient_c=!0),e.color&&this._differs(n.gradient_h,n.gradient_h=function(e){var n=e.color,o=t(n).lch(),i=_t(o[2],75,7,6).map(function(e){return t.lch(o[0],o[1],e).hex()});return t.scale(i).mode("lch").colors(14)}(n))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&this._differs(n.nearest_l,n.nearest_l=function(t){var e=t.color;return vt(t.gradient_l,e)}(n))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&this._differs(n.nearest_c,n.nearest_c=function(t){var e=t.color;return vt(t.gradient_c,e)}(n))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&this._differs(n.nearest_h,n.nearest_h=function(t){var e=t.color;return vt(t.gradient_h,e)}(n))&&(e.nearest_h=!0),e.color&&(this._differs(n.textColor,n.textColor=function(e){var n=e.color;return t(n).get("lab.l")>60?"black":"white"}(n))&&(e.textColor=!0),this._differs(n.borderColor,n.borderColor=function(e){var n=e.color;return t(n).darker().hex()}(n))&&(e.borderColor=!0))};var jt={update:function(t){var e=this.get().palette;this.set({value:Ht(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,o=e.palette,i=e.custom;n.forEach(function(e){return i[e]=Ht(t,o)}),this.set({custom:i})},toggle:function(t){t.preventDefault();var e=this.get().expanded;this.set({expanded:!e})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,o=n.indexOf(t);e.shiftKey?o>-1?n.splice(o,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return $t(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected,o=e.colorKeys;console.log(n),o.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),console.log(n),this.set({selected:n})}};function Ht(t,e){var n=e.indexOf(t);return n>-1?n:t}function $t(t,e){return"number"==typeof t?e[t%e.length]:t}function St(t,e){var n={},o={color:e.hexColor,palette:e.palette};"open"in e&&(o.visible=e.open,n.visible=!0);var i=new Tt({root:t.root,data:o,_bind:function(e,o){t.get();var i={};!n.visible&&e.visible&&(i.open=o.visible),t._set(i),n={}}});return t.root._beforecreate.push(function(){i._bind({visible:1},i.get())}),i.on("change",function(e){t.update(e)}),{c:function(){i._fragment.c()},m:function(t,e){i._mount(t,e)},p:function(t,e){var o={};t.hexColor&&(o.color=e.hexColor),t.palette&&(o.palette=e.palette),!n.visible&&t.open&&(o.visible=e.open,n.visible=!0),i._set(o),n={}},u:function(){i._unmount()},d:function(){i.destroy(!1)}}}function It(t,e){var n,s,l;function c(e){t.toggle(e)}return{c:function(){n=d("span"),(s=d("a")).textContent="customize colors...",this.h()},h:function(){v(s,"click",c),s.href="#customize",s.className=l="btn btn-small custom "+(e.expanded?"btn-primary":""),g(s,"role","button"),n.className="custom-color-selector-head"},m:function(t,e){i(n,t,e),o(s,n)},p:function(t,e){t.expanded&&l!==(l="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(s.className=l)},u:function(){a(n)},d:function(){m(s,"click",c)}}}function At(t,e){var n,s,l,c,r,u,h,p,_=e.k,g=(e.each_value,e.k_index,_.defined?"":"Ã"),b=_.key;return{c:function(){n=d("li"),s=d("div"),l=f(g),c=f("\n                    "),r=d("label"),u=f(b),this.h()},h:function(){s.className="color",x(s,"background",_.color),v(n,"click",Dt),n.className=h=e.selected.indexOf(_.key)>-1?"selected":"",n.dataset.series=p=_.key,n._svelte={component:t,each_value:e.each_value,k_index:e.k_index}},m:function(t,e){i(n,t,e),o(s,n),o(l,s),o(c,n),o(r,n),o(u,r)},p:function(t,e){_=e.k,e.each_value,e.k_index,t.colorKeys&&g!==(g=_.defined?"":"Ã")&&(l.data=g),t.colorKeys&&x(s,"background",_.color),t.colorKeys&&b!==(b=_.key)&&(u.data=b),(t.selected||t.colorKeys)&&h!==(h=e.selected.indexOf(_.key)>-1?"selected":"")&&(n.className=h),t.colorKeys&&p!==(p=_.key)&&(n.dataset.series=p),n._svelte.each_value=e.each_value,n._svelte.k_index=e.k_index},u:function(){a(n)},d:function(){m(n,"click",Dt)}}}function zt(t,e){var n,s,l,c={},r={color:e.customColor,palette:e.palette};"openCustom"in e&&(r.visible=e.openCustom,c.visible=!0);var u=new Tt({root:t.root,data:r,_bind:function(e,n){t.get();var o={};!c.visible&&e.visible&&(o.openCustom=n.visible),t._set(o),c={}}});function h(e){t.reset()}return t.root._beforecreate.push(function(){u._bind({visible:1},u.get())}),u.on("change",function(e){t.updateCustom(e)}),{c:function(){n=d("div"),u._fragment.c(),s=f("\n                "),(l=d("button")).textContent="Reset",this.h()},h:function(){v(l,"click",h),l.className="btn",n.className="select"},m:function(t,e){i(n,t,e),u._mount(n,null),o(s,n),o(l,n)},p:function(t,e){var n={};t.customColor&&(n.color=e.customColor),t.palette&&(n.palette=e.palette),!c.visible&&t.openCustom&&(n.visible=e.openCustom,c.visible=!0),u._set(n),c={}},u:function(){a(n)},d:function(){u.destroy(!1),m(l,"click",h)}}}function Et(t,n){var o;return{c:function(){(o=d("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){o.className="info"},m:function(t,e){i(o,t,e)},p:e,u:function(){a(o)},d:e}}function Ot(t,e){for(var s,l,c,r,h,p,_,g,b,y,k,N,w,C,M,T,L,j,H,$,S=e.colorKeys,I=[],A=0;A<S.length;A+=1)I[A]=At(t,n(n({},e),{each_value:S,k:S[A],k_index:A}));function z(e){t.selectAll(e)}function E(e){t.selectNone(e)}function O(e){t.selectInvert(e)}function D(t){return t.selected.length?zt:Et}var q=D(e),F=q(t,e);function Y(e){t.resetAll()}return{c:function(){s=d("div"),l=d("div"),c=d("div"),(r=d("h4")).textContent="Select element(s):",h=f("\n            "),p=d("ul");for(var t=0;t<I.length;t+=1)I[t].c();_=f("\n            "),g=d("div"),b=f("Select: Â \n                "),(y=d("a")).textContent="all",k=f(" Â \n                "),(N=d("a")).textContent="none",w=f(" Â \n                "),(C=d("a")).textContent="invert",M=f("\n        "),T=d("div"),(L=d("h4")).textContent="Choose a color:",j=f("\n            "),F.c(),H=f("\n            "),($=d("button")).textContent="Reset all colors",this.h()},h:function(){p.className="dataseries unstyled",v(y,"click",z),y.href="#/select-all",v(N,"click",E),N.href="#/select-none",v(C,"click",O),C.href="#/select-invert",x(g,"font-size","12px"),x(g,"text-align","center"),x(g,"margin-bottom","10px"),c.className="span2",x(c,"width","43%"),v($,"click",Y),x($,"margin-top","20px"),$.className="btn",T.className="span2",x(T,"width","42%"),l.className="row",s.className="custom-color-selector-body",x(s,"display","block")},m:function(t,e){i(s,t,e),o(l,s),o(c,l),o(r,c),o(h,c),o(p,c);for(var n=0;n<I.length;n+=1)I[n].m(p,null);o(_,c),o(g,c),o(b,g),o(y,g),o(k,g),o(N,g),o(w,g),o(C,g),o(M,l),o(T,l),o(L,T),o(j,T),F.m(T,null),o(H,T),o($,T)},p:function(e,o){var i=o.colorKeys;if(e.colorKeys||e.selected){for(var a=0;a<i.length;a+=1){var s=n(n({},o),{each_value:i,k:i[a],k_index:a});I[a]?I[a].p(e,s):(I[a]=At(t,s),I[a].c(),I[a].m(p,null))}for(;a<I.length;a+=1)I[a].u(),I[a].d();I.length=i.length}q===(q=D(o))&&F?F.p(e,o):(F.u(),F.d(),(F=q(t,o)).c(),F.m(T,H))},u:function(){a(s);for(var t=0;t<I.length;t+=1)I[t].u();F.u()},d:function(){u(I),m(y,"click",z),m(N,"click",E),m(C,"click",O),F.d(),m($,"click",Y)}}}function Dt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.k_index];e.toggleSelect(n.key,t)}function qt(t){T(this,t),this._state=n(n(this.store._init(["vis","themeData"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}}),t.data),this.store._add(this,["vis","themeData"]),this._recompute({$themeData:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[j];var e,s,l,c,r,u,h,v,_,m,g,b,y=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,m=s.hexColor&&St(e,s),g=s.customizable&&It(e,s),b=s.customizable&&s.expanded&&Ot(e,s),{c:function(){l=d("div"),c=d("label"),r=f("\n    "),u=d("div"),m&&m.c(),h=f("\n\n        "),g&&g.c(),v=f("\n\n"),b&&b.c(),_=p(),this.h()},h:function(){c.className="control-label",x(c,"width","100px"),u.className="controls",l.className="control-group vis-option-type-color"},m:function(t,e){i(l,t,e),o(c,l),c.innerHTML=s.label,o(r,l),o(u,l),m&&m.m(u,null),o(h,u),g&&g.m(u,null),i(v,t,e),b&&b.m(t,e),i(_,t,e)},p:function(t,n){t.label&&(c.innerHTML=n.label),n.hexColor?m?m.p(t,n):((m=St(e,n)).c(),m.m(u,h)):m&&(m.u(),m.d(),m=null),n.customizable?g?g.p(t,n):((g=It(e,n)).c(),g.m(u,null)):g&&(g.u(),g.d(),g=null),n.customizable&&n.expanded?b?b.p(t,n):((b=Ot(e,n)).c(),b.m(_.parentNode,_)):b&&(b.u(),b.d(),b=null)},u:function(){c.innerHTML="",a(l),m&&m.u(),g&&g.u(),a(v),b&&b.u(),a(_)},d:function(){m&&m.d(),g&&g.d(),b&&b.d()}}),this.root._oncreate.push(function(){(function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}).call(y),y.fire("update",{changed:{$vis:1,customizable:1,axis:1,custom:1,palette:1,$themeData:1,value:1,selected:1,label:1,hexColor:1,open:1,expanded:1,colorKeys:1,customColor:1,openCustom:1},current:y._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}function Ft(t,n){var l,c,r,u,h;return{c:function(){l=d("div"),c=f("For help on custom formats, check the "),r=d("noscript"),u=d("noscript"),h=f("."),this.h()},h:function(){l.className="small svelte-h47p2z"},m:function(t,e){i(l,t,e),o(c,l),o(r,l),r.insertAdjacentHTML("afterend",n.customFormatHelp),o(u,l),o(h,l)},p:function(t,e){t.customFormatHelp&&(s(r,u),r.insertAdjacentHTML("afterend",e.customFormatHelp))},u:function(){s(r,u),a(l)},d:e}}function Yt(t,n){var s,l,c,r=n.opt,u=(n.each_value,n.opt_index,r.l);return{c:function(){s=d("option"),l=f(u),this.h()},h:function(){s.__value=c=r.f,s.value=s.__value},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){r=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=r.l)&&(l.data=u),t.options&&c!==(c=r.f)&&(s.__value=c),s.value=s.__value},u:function(){a(s)},d:e}}function Rt(t,e){var n,o=!1;function s(){o=!0,t.set({custom:n.value}),o=!1}return{c:function(){n=d("input"),this.h()},h:function(){v(n,"input",s),g(n,"type","text"),n.className="svelte-h47p2z"},m:function(t,o){i(n,t,o),n.value=e.custom},p:function(t,e){o||(n.value=e.custom)},u:function(){a(n)},d:function(){m(n,"input",s)}}}function Kt(t){T(this,t),this._state=n(n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null}),t.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1},this._state),this._handlers.destroy=[j];var e=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var s,l,c,r,h,p,_,g,b,x=!1,N="custom"==e.selected&&Ft(0,e),w=e.options,C=[],M=0;M<w.length;M+=1)C[M]=Yt(0,n(n({},e),{each_value:w,opt:w[M],opt_index:M}));function T(){x=!0,t.set({selected:k(p)}),x=!1}var L="custom"==e.selected&&Rt(t,e);return{c:function(){s=d("div"),l=d("label"),c=f("\n\n    "),r=d("div"),N&&N.c(),h=f("\n\n        "),p=d("select");for(var t=0;t<C.length;t+=1)C[t].c();_=d("option"),g=f("(custom)"),b=f("\n        "),L&&L.c(),this.h()},h:function(){l.className="control-label svelte-h47p2z",_.__value="custom",_.value=_.__value,v(p,"change",T),"selected"in e||t.root._beforecreate.push(T),p.className="svelte-h47p2z",r.className="controls form-inline",s.className="control-group vis-option-custom-format"},m:function(t,n){i(s,t,n),o(l,s),l.innerHTML=e.label,o(c,s),o(r,s),N&&N.m(r,null),o(h,r),o(p,r);for(var a=0;a<C.length;a+=1)C[a].m(p,null);o(_,p),o(g,_),y(p,e.selected),o(b,r),L&&L.m(r,null)},p:function(e,o){e.label&&(l.innerHTML=o.label),"custom"==o.selected?N?N.p(e,o):((N=Ft(0,o)).c(),N.m(r,h)):N&&(N.u(),N.d(),N=null);var i=o.options;if(e.options){for(var a=0;a<i.length;a+=1){var s=n(n({},o),{each_value:i,opt:i[a],opt_index:a});C[a]?C[a].p(e,s):(C[a]=Yt(0,s),C[a].c(),C[a].m(p,_))}for(;a<C.length;a+=1)C[a].u(),C[a].d();C.length=i.length}x||y(p,o.selected),"custom"==o.selected?L?L.p(e,o):((L=Rt(t,o)).c(),L.m(r,null)):L&&(L.u(),L.d(),L=null)},u:function(){l.innerHTML="",a(s),N&&N.u();for(var t=0;t<C.length;t+=1)C[t].u();L&&L.u()},d:function(){N&&N.d(),u(C),m(p,"change",T),L&&L.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;this.observe("selected",function(e,n){if(e!=n){var o=t.get().custom;t.set({value:"custom"!=e?e:o+" "})}}),this.observe("value",function(e,n){if(e!=n){for(var o=0,i=t.get().options;o<i.length;o+=1)if(i[o].f==e)return t.set({selected:e});t.set({selected:"custom",custom:e})}}),this.observe("custom",function(e,n){e!=n&&"custom"==t.get().selected&&t.set({value:e})})}).call(e),e.fire("update",{changed:{axisCol:1,$vis:1,$dataset:1,axis:1,label:1,selected:1,customFormatHelp:1,options:1,custom:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._beforecreate),L(this._oncreate))}function Pt(t,n){var s,l;return{c:function(){s=d("span"),l=f(n.unit),this.h()},h:function(){s.className="unit svelte-l16hlj"},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){t.unit&&(l.data=e.unit)},u:function(){a(s)},d:e}}function Bt(t){T(this,t),this._state=n({unit:"",step:1,min:0,max:100,width:"100px"},t.data),this._fragment=function(t,e){var n,s,l,c,r,u,h,p,_=!1;function y(){t.set({value:b(r.value)})}function k(){t.set({value:b(r.value)})}function N(){_=!0,t.set({value:b(h.value)}),_=!1}var w=e.unit&&Pt(0,e);return{c:function(){n=d("div"),s=d("label"),l=f("\n    "),c=d("div"),r=d("input"),u=f("Â Â "),h=d("input"),p=f(" "),w&&w.c(),this.h()},h:function(){x(s,"width",e.width),s.className="control-label",v(r,"input",y),v(r,"change",k),g(r,"type","range"),r.min=e.min,r.max=e.max,r.step=e.step,r.className="svelte-l16hlj",v(h,"input",N),g(h,"type","number"),h.min=e.min,h.max=e.max,h.step=e.step,h.className="svelte-l16hlj",c.className="controls",n.className="control-group vis-option-group vis-option-type-number"},m:function(t,a){i(n,t,a),o(s,n),s.innerHTML=e.label,o(l,n),o(c,n),o(r,c),r.value=e.value,o(u,c),o(h,c),h.value=e.value,o(p,c),w&&w.m(c,null)},p:function(t,e){t.label&&(s.innerHTML=e.label),t.width&&x(s,"width",e.width),r.value=e.value,r.value=e.value,t.min&&(r.min=e.min),t.max&&(r.max=e.max),t.step&&(r.step=e.step),_||(h.value=e.value),t.min&&(h.min=e.min),t.max&&(h.max=e.max),t.step&&(h.step=e.step),e.unit?w?w.p(t,e):((w=Pt(0,e)).c(),w.m(c,null)):w&&(w.u(),w.d(),w=null)},u:function(){s.innerHTML="",a(n),w&&w.u()},d:function(){m(r,"input",y),m(r,"change",k),m(h,"input",N),w&&w.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Qt(t,e){var n,s,l,c,r,u,h,p,_,b=e.opt,x=(e.each_value,e.opt_index,b.label);function y(){t.set({value:s.__value})}var k=b.help&&Gt(t,e);return{c:function(){n=d("label"),s=d("input"),c=f("Â "),r=d("span"),u=f(x),h=f("\n            "),k&&k.c(),this.h()},h:function(){t._bindingGroups[0].push(s),v(s,"change",y),g(s,"type","radio"),s.__value=l=b.value,s.value=s.__value,s.disabled=e.disabled,s.className="svelte-16mkoh8",r.className="svelte-16mkoh8",n.title=p=b.tooltip||"",n.className=_="radio "+(e.disabled?"disabled":"")+" "+(b.help?"has-help":"")+" svelte-16mkoh8"},m:function(t,a){i(n,t,a),o(s,n),s.checked=s.__value===e.value,o(c,n),o(r,n),o(u,r),o(h,n),k&&k.m(n,null)},p:function(e,o){b=o.opt,o.each_value,o.opt_index,s.checked=s.__value===o.value,e.options&&l!==(l=b.value)&&(s.__value=l),s.value=s.__value,e.disabled&&(s.disabled=o.disabled),e.options&&x!==(x=b.label)&&(u.data=x),b.help?k?k.p(e,o):((k=Gt(t,o)).c(),k.m(n,null)):k&&(k.u(),k.d(),k=null),e.options&&p!==(p=b.tooltip||"")&&(n.title=p),(e.disabled||e.options)&&_!==(_="radio "+(o.disabled?"disabled":"")+" "+(b.help?"has-help":"")+" svelte-16mkoh8")&&(n.className=_)},u:function(){a(n),k&&k.u()},d:function(){t._bindingGroups[0].splice(t._bindingGroups[0].indexOf(s),1),m(s,"change",y),k&&k.d()}}}function Gt(t,n){var o,s=n.opt,l=(n.each_value,n.opt_index,s.help);return{c:function(){o=d("div"),this.h()},h:function(){o.className="help svelte-16mkoh8"},m:function(t,e){i(o,t,e),o.innerHTML=l},p:function(t,e){s=e.opt,e.each_value,e.opt_index,t.options&&l!==(l=s.help)&&(o.innerHTML=l)},u:function(){o.innerHTML="",a(o)},d:e}}function Wt(t){T(this,t),this._state=n({disabled:!1,width:"auto"},t.data),this._bindingGroups=[[]],this._fragment=function(t,e){for(var s,l,c,r,h,p=e.options,v=[],_=0;_<p.length;_+=1)v[_]=Qt(t,n(n({},e),{each_value:p,opt:p[_],opt_index:_}));return{c:function(){s=d("div"),l=d("label"),c=f("\n\n    "),r=d("div");for(var t=0;t<v.length;t+=1)v[t].c();this.h()},h:function(){x(l,"width",e.width),l.className="control-label svelte-16mkoh8",r.className="controls form-inline svelte-16mkoh8",s.className=h="control-group vis-option-group vis-option-type-radio "+(e.inline?"inline":"")+" svelte-16mkoh8"},m:function(t,n){i(s,t,n),o(l,s),l.innerHTML=e.label,o(c,s),o(r,s);for(var a=0;a<v.length;a+=1)v[a].m(r,null)},p:function(e,o){e.label&&(l.innerHTML=o.label),e.width&&x(l,"width",o.width);var i=o.options;if(e.options||e.disabled||e.value){for(var a=0;a<i.length;a+=1){var c=n(n({},o),{each_value:i,opt:i[a],opt_index:a});v[a]?v[a].p(e,c):(v[a]=Qt(t,c),v[a].c(),v[a].m(r,null))}for(;a<v.length;a+=1)v[a].u(),v[a].d();v.length=i.length}e.inline&&h!==(h="control-group vis-option-group vis-option-type-radio "+(o.inline?"inline":"")+" svelte-16mkoh8")&&(s.className=h)},u:function(){l.innerHTML="",a(s);for(var t=0;t<v.length;t+=1)v[t].u()},d:function(){u(v)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Jt(t,n){var s,l,c,r=n.opt,u=(n.each_value,n.opt_index,r.label);return{c:function(){s=d("option"),l=f(u),this.h()},h:function(){s.__value=c=r.value,s.value=s.__value},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){r=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=r.label)&&(l.data=u),t.options&&c!==(c=r.value)&&(s.__value=c),s.value=s.__value},u:function(){a(s)},d:e}}function Ut(t,e){for(var o,s=e.options,l=[],c=0;c<s.length;c+=1)l[c]=Jt(0,n(n({},e),{each_value:s,opt:s[c],opt_index:c}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();o=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);i(o,t,e)},p:function(t,e){var i=e.options;if(t.options){for(var a=0;a<i.length;a+=1){var s=n(n({},e),{each_value:i,opt:i[a],opt_index:a});l[a]?l[a].p(t,s):(l[a]=Jt(0,s),l[a].c(),l[a].m(o.parentNode,o))}for(;a<l.length;a+=1)l[a].u(),l[a].d();l.length=i.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(o)},d:function(){u(l)}}}function Vt(t,e){for(var o,s,l=e.optgroup,c=(e.each_value_1,e.optgroup_index,l.options),r=[],h=0;h<c.length;h+=1)r[h]=Xt(t,n(n({},e),{each_value_2:c,opt:c[h],opt_index_1:h}));return{c:function(){o=d("optgroup");for(var t=0;t<r.length;t+=1)r[t].c();this.h()},h:function(){g(o,"label",s=l.label)},m:function(t,e){i(o,t,e);for(var n=0;n<r.length;n+=1)r[n].m(o,null)},p:function(e,i){l=i.optgroup,i.each_value_1,i.optgroup_index;var a=l.options;if(e.optgroups){for(var c=0;c<a.length;c+=1){var u=n(n({},i),{each_value_2:a,opt:a[c],opt_index_1:c});r[c]?r[c].p(e,u):(r[c]=Xt(t,u),r[c].c(),r[c].m(o,null))}for(;c<r.length;c+=1)r[c].u(),r[c].d();r.length=a.length}e.optgroups&&s!==(s=l.label)&&g(o,"label",s)},u:function(){a(o);for(var t=0;t<r.length;t+=1)r[t].u()},d:function(){u(r)}}}function Xt(t,n){n.optgroup,n.each_value_1,n.optgroup_index;var s,l,c,r=n.opt,u=(n.each_value_2,n.opt_index_1,r.label);return{c:function(){s=d("option"),l=f(u),this.h()},h:function(){s.__value=c=r.value,s.value=s.__value},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){e.optgroup,e.each_value_1,e.optgroup_index,r=e.opt,e.each_value_2,e.opt_index_1,t.optgroups&&u!==(u=r.label)&&(l.data=u),t.optgroups&&c!==(c=r.value)&&(s.__value=c),s.value=s.__value},u:function(){a(s)},d:e}}function Zt(t,e){for(var o,s=e.optgroups,l=[],c=0;c<s.length;c+=1)l[c]=Vt(t,n(n({},e),{each_value_1:s,optgroup:s[c],optgroup_index:c}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();o=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);i(o,t,e)},p:function(e,i){var a=i.optgroups;if(e.optgroups){for(var s=0;s<a.length;s+=1){var c=n(n({},i),{each_value_1:a,optgroup:a[s],optgroup_index:s});l[s]?l[s].p(e,c):(l[s]=Vt(t,c),l[s].c(),l[s].m(o.parentNode,o))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(o)},d:function(){u(l)}}}function te(t){T(this,t),this._state=n({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){var n,s,l,c,r,u,h,_=!1,g=e.options.length&&Ut(0,e),b=e.optgroups.length&&Zt(t,e);function N(){_=!0,t.set({value:k(r)}),_=!1}return{c:function(){n=d("div"),s=d("label"),l=f("\n\n    "),c=d("div"),r=d("select"),g&&g.c(),u=p(),b&&b.c(),this.h()},h:function(){x(s,"width",e.labelWidth),s.className="control-label",v(r,"change",N),"value"in e||t.root._beforecreate.push(N),r.disabled=e.disabled,x(r,"width",e.width),c.className=h="controls form-inline "+(e.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(t,a){i(n,t,a),o(s,n),s.innerHTML=e.label,o(l,n),o(c,n),o(r,c),g&&g.m(r,null),o(u,r),b&&b.m(r,null),y(r,e.value)},p:function(e,n){e.label&&(s.innerHTML=n.label),e.labelWidth&&x(s,"width",n.labelWidth),n.options.length?g?g.p(e,n):((g=Ut(0,n)).c(),g.m(r,u)):g&&(g.u(),g.d(),g=null),n.optgroups.length?b?b.p(e,n):((b=Zt(t,n)).c(),b.m(r,null)):b&&(b.u(),b.d(),b=null),_||y(r,n.value),e.disabled&&(r.disabled=n.disabled),e.width&&x(r,"width",n.width),e.disabled&&h!==(h="controls form-inline "+(n.disabled?"disabled":""))&&(c.className=h)},u:function(){s.innerHTML="",a(n),g&&g.u(),b&&b.u()},d:function(){g&&g.d(),b&&b.d(),m(r,"change",N)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._beforecreate))}n(qt.prototype,H),n(qt.prototype,jt),qt.prototype._recompute=function(e,n){e.$themeData&&this._differs(n.palette,n.palette=n.$themeData.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&this._differs(n.colorKeys,n.colorKeys=Lt(n))&&(e.colorKeys=!0),(e.value||e.palette)&&this._differs(n.hexColor,n.hexColor=function(t){return $t(t.value,t.palette)}(n))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&this._differs(n.customColor,n.customColor=function(e){var n=e.selected,o=e.palette,i=e.custom;if(void 0===i[n[0]])return"#ccc";var a=n.filter(function(t){return void 0!==i[t]}).map(function(t){return $t(i[t],o)});return a.length?t.average(a,"lab"):"#ccc"}(n))&&(e.customColor=!0)},n(Kt.prototype,H),Kt.prototype._recompute=function(t,e){(t.$vis||t.$dataset||t.axis)&&this._differs(e.axisCol,e.axisCol=function(t){var e=t.$vis,n=t.$dataset,o=t.axis;if(!e||!o)return null;var i=e.axes()[o];return n.column("object"==typeof i?i[0]:i)}(e))&&(t.axisCol=!0),t.axisCol&&(this._differs(e.customFormatHelp,e.customFormatHelp=function(t){var e=t.axisCol;if(e)return"date"==e.type()?'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">moment.js documentation</a>':"number"==e.type()?'<a href="http://numeraljs.com/#format" target="_blank">numeral.js documentation</a>':""}(e))&&(t.customFormatHelp=!0),this._differs(e.options,e.options=function(t){var e=t.axisCol;return e?"number"==e.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"==e.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"â15, â16",f:"âYY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr â15, May â15",f:"MMM âYY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(e))&&(t.options=!0))},n(Bt.prototype,H),n(Wt.prototype,H),n(te.prototype,H);function ee(t,e){var n,s,l,c,r=e.opt,u=(e.each_value,e.opt_index,r.label);return{c:function(){n=d("li"),s=d("a"),this.h()},h:function(){v(s,"click",oe),s.href=l="#/"+r.value,s._svelte={component:t,each_value:e.each_value,opt_index:e.opt_index},n.className=c=(e.value==r.value?"selected":"")+" svelte-154oatd"},m:function(t,e){i(n,t,e),o(s,n),s.innerHTML=u},p:function(t,e){r=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=r.label)&&(s.innerHTML=u),t.options&&l!==(l="#/"+r.value)&&(s.href=l),s._svelte.each_value=e.each_value,s._svelte.opt_index=e.opt_index,(t.value||t.options)&&c!==(c=(e.value==r.value?"selected":"")+" svelte-154oatd")&&(n.className=c)},u:function(){s.innerHTML="",a(n)},d:function(){m(s,"click",oe)}}}function ne(t,e){for(var o,s=e.options,l=[],c=0;c<s.length;c+=1)l[c]=ee(t,n(n({},e),{each_value:s,opt:s[c],opt_index:c}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();o=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);i(o,t,e)},p:function(e,i){var a=i.options;if(e.value||e.options){for(var s=0;s<a.length;s+=1){var c=n(n({},i),{each_value:a,opt:a[s],opt_index:s});l[s]?l[s].p(e,c):(l[s]=ee(t,c),l[s].c(),l[s].m(o.parentNode,o))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(o)},d:function(){u(l)}}}function oe(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.opt_index];e.select(t,n)}function ie(t){var e,s,c,r,u,p,v,_,m,b,y,k,N,w,C,M,j,H,$,S;T(this,t),this._state=n({forcePlaceholder:!1,disabled:!1,width:"auto",options:[],optgroups:[],placeholder:"(select an item)"},t.data),this._recompute({value:1,options:1,placeholder:1,forcePlaceholder:1},this._state),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,$=s.options.length&&ne(e,s),S=new ht({root:e.root,slots:{default:h(),button:h(),content:h()}}),{c:function(){c=d("div"),r=d("label"),u=f("\n\n    "),p=d("div"),v=f("\n            "),_=d("span"),m=d("div"),b=d("button"),y=d("noscript"),k=f("\n                        "),N=d("span"),w=f("\n            "),C=d("span"),M=d("ul"),$&&$.c(),j=f("\n        "),S._fragment.c(),this.h()},h:function(){r.className="control-label",N.className="caret svelte-154oatd",b.className="btn dropdown-toggle svelte-154oatd",m.className="btn-group",g(_,"slot","button"),M.className="dropdown-menu svelte-154oatd",x(M,"display","block"),g(C,"slot","content"),p.className=H="controls form-inline "+(s.disabled?"disabled":"")+" svelte-154oatd",c.className="control-group vis-option-type-select"},m:function(t,e){i(c,t,e),o(r,c),r.innerHTML=s.label,o(u,c),o(p,c),o(v,S._slotted.default),o(_,S._slotted.button),o(m,_),o(b,m),o(y,b),y.insertAdjacentHTML("beforebegin",s.currentLabel),o(k,b),o(N,b),o(w,S._slotted.default),o(C,S._slotted.content),o(M,C),$&&$.m(M,null),o(j,S._slotted.default),S._mount(p,null)},p:function(t,n){t.label&&(r.innerHTML=n.label),t.currentLabel&&(l(y),y.insertAdjacentHTML("beforebegin",n.currentLabel)),n.options.length?$?$.p(t,n):(($=ne(e,n)).c(),$.m(M,null)):$&&($.u(),$.d(),$=null),t.disabled&&H!==(H="controls form-inline "+(n.disabled?"disabled":"")+" svelte-154oatd")&&(p.className=H)},u:function(){r.innerHTML="",l(y),a(c),$&&$.u()},d:function(){$&&$.d(),S.destroy(!1)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}function ae(t){var e=t-1;return e*e*e+1}function se(t,e){var n=e.delay;void 0===n&&(n=0);var o=e.duration;void 0===o&&(o=400);var i=e.easing;void 0===i&&(i=ae);var a=getComputedStyle(t),s=+a.opacity,l=parseFloat(a.height),c=parseFloat(a.paddingTop),r=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),h=parseFloat(a.marginBottom),d=parseFloat(a.borderTopWidth),f=parseFloat(a.borderBottomWidth);return{delay:n,duration:o,easing:i,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*s+";height: "+t*l+"px;padding-top: "+t*c+"px;padding-bottom: "+t*r+"px;margin-top: "+t*u+"px;margin-bottom: "+t*h+"px;border-top-width: "+t*d+"px;border-bottom-width: "+t*f+"px;"}}}n(ie.prototype,H),n(ie.prototype,{select:function(t,e){t.preventDefault(),this.set({value:e.value}),this.fire("change",e.value)}}),ie.prototype._recompute=function(t,e){(t.value||t.options||t.placeholder||t.forcePlaceholder)&&this._differs(e.currentLabel,e.currentLabel=function(t){var e=t.value,n=t.options,o=t.placeholder;if(!t.forcePlaceholder)for(var i=0;i<n.length;i++)if(n[i].value==e)return n[i].label;return'<span style="color:#999;font-size:12px;">'+o+"</span>"}(e))&&(t.currentLabel=!0)};var le={show:function(){var t=this,e=setTimeout(function(){t.set({visible:!0})},400);this.set({t:e})},hide:function(){var t=this.get().t;clearTimeout(t),this.set({visible:!1})}};function ce(t,n){var o;return{c:function(){o=d("i"),this.h()},h:function(){o.className="im im-graduation-hat svelte-1mkn8ur"},m:function(t,e){i(o,t,e)},u:function(){a(o)},d:e}}function re(t,n){var o;return{c:function(){o=f("?")},m:function(t,e){i(o,t,e)},u:function(){a(o)},d:e}}function ue(t,n){var s,l=t._slotted.default;return{c:function(){s=d("div"),this.h()},h:function(){s.className="content svelte-1mkn8ur"},m:function(t,e){i(s,t,e),l&&o(l,s)},u:function(){a(s),l&&r(s,l)},d:e}}function he(t){T(this,t),this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l;function c(t){return t.visible?ce:re}var r=c(e),u=r(t,e),h=e.visible&&ue(t);function p(e){t.show()}function _(e){t.hide()}return{c:function(){n=d("div"),s=d("span"),u.c(),l=f("\n    "),h&&h.c(),this.h()},h:function(){s.className="svelte-1mkn8ur",v(n,"mouseenter",p),v(n,"mouseleave",_),n.className="help svelte-1mkn8ur"},m:function(t,e){i(n,t,e),o(s,n),u.m(s,null),o(l,n),h&&h.m(n,null)},p:function(e,o){r!==(r=c(o))&&(u.u(),u.d(),(u=r(t,o)).c(),u.m(s,null)),o.visible?h||((h=ue(t)).c(),h.m(n,null)):h&&(h.u(),h.d(),h=null)},u:function(){a(n),u.u(),h&&h.u()},d:function(){u.d(),h&&h.d(),m(n,"mouseenter",p),m(n,"mouseleave",_)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function de(t){var e=this,n=t.changed,o=t.current;n.value&&o.value&&(this.set({highlight:!0}),setTimeout(function(){e.set({highlight:!1})},300))}function fe(t,e){var n,i,a=t._slotted.help,s=new he({root:t.root,slots:{default:h()}});return{c:function(){n=f("\n        "),i=f("\n    "),s._fragment.c()},m:function(t,e){o(n,s._slotted.default),a&&o(a,s._slotted.default),o(i,s._slotted.default),s._mount(t,e)},u:function(){a&&r(s._slotted.default,a),s._unmount()},d:function(){s.destroy(!1)}}}function pe(t,n){var s,l,c,r,u;return{c:function(){s=d("div"),l=d("div"),this.h()},h:function(){l.className="disabled-msg svelte-ejkf4x",s.className="svelte-ejkf4x"},m:function(t,e){i(s,t,e),o(l,s),l.innerHTML=n.disabled_msg},p:function(t,e){(u||t.disabled_msg)&&(l.innerHTML=e.disabled_msg)},i:function(e,n){r||(r=!0,u=!1,t.root._aftercreate.push(function(){c||(c=w(t,s,se,{},!0)),c.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!u){u=!0,r=!1;var n=1;c.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),c=null})}},u:function(){l.innerHTML="",a(s)},d:e}}function ve(t,n){var s,l,c,u,h,f=t._slotted.default;return{c:function(){s=d("div"),l=d("div"),this.h()},h:function(){l.className="switch-content svelte-ejkf4x",s.className="svelte-ejkf4x"},m:function(t,e){i(s,t,e),o(l,s),f&&o(f,l)},p:e,i:function(e,n){u||(u=!0,h=!1,t.root._aftercreate.push(function(){c||(c=w(t,s,se,{},!0)),c.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!h){h=!0,u=!1;var n=1;c.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),c=null})}},u:function(){a(s),f&&r(l,f)},d:e}}function _e(t){T(this,t),this._state=n({hasHelp:!1,disabled_msg:"",disabled_state:"auto",disabled:!1,highlight:!1},t.data),this._handlers.state=[de],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,r,u,h,p,_,b,y,k,N,w,C,M=e.hasHelp&&fe(t);function T(){t.set({value:u.checked})}var L=[pe,ve],j=[];function H(t){return t.disabled&&t.disabled_msg?0:!t.disabled&&t.value?1:-1}return~(N=H(e))&&(w=j[N]=L[N](t,e)),{c:function(){n=d("div"),M&&M.c(),s=f("\n    "),l=d("label"),r=d("label"),u=d("input"),p=d("span"),_=f("\n        "),b=d("noscript"),k=f("\n    "),w&&w.c(),this.h()},h:function(){v(u,"change",T),u.className=h=(e.disabled&&"on"==e.disabled_state?"disabled-force-checked":e.disabled&&"off"==e.disabled_state?"disabled-force-unchecked":"")+" svelte-ejkf4x",u.disabled=e.disabled,g(u,"type","checkbox"),p.className="slider round svelte-ejkf4x",r.className="switch svelte-ejkf4x",l.className=y="switch-outer "+(e.disabled?"disabled":"")+" svelte-ejkf4x",x(l,"padding-left","40px"),n.className=C="control-group vis-option-group vis-option-type-switch "+(e.highlight?"highlight":"")+" svelte-ejkf4x"},m:function(t,a){i(n,t,a),M&&M.m(n,null),o(s,n),o(l,n),o(r,l),o(u,r),u.checked=e.value,o(p,r),o(_,l),o(b,l),b.insertAdjacentHTML("afterend",e.label),o(k,n),~N&&j[N].i(n,null)},p:function(e,o){o.hasHelp?M||((M=fe(t)).c(),M.m(n,s)):M&&(M.u(),M.d(),M=null),u.checked=o.value,(e.disabled||e.disabled_state)&&h!==(h=(o.disabled&&"on"==o.disabled_state?"disabled-force-checked":o.disabled&&"off"==o.disabled_state?"disabled-force-unchecked":"")+" svelte-ejkf4x")&&(u.className=h),e.disabled&&(u.disabled=o.disabled),e.label&&(c(b),b.insertAdjacentHTML("afterend",o.label)),e.disabled&&y!==(y="switch-outer "+(o.disabled?"disabled":"")+" svelte-ejkf4x")&&(l.className=y);var i=N;(N=H(o))===i?~N&&j[N].p(e,o):(w&&w.o(function(){j[i].u(),j[i].d(),j[i]=null}),~N?((w=j[N])||(w=j[N]=L[N](t,o)).c(),w.i(n,null)):w=null),e.highlight&&C!==(C="control-group vis-option-group vis-option-type-switch "+(o.highlight?"highlight":"")+" svelte-ejkf4x")&&(n.className=C)},u:function(){c(b),a(n),M&&M.u()},d:function(){M&&M.d(),m(u,"change",T),~N&&(j[N].u(),j[N].d())}}}(this,this._state),this.root._oncreate.push(function(){var t={highlight:1,hasHelp:1,disabled:1,disabled_state:1,value:1,label:1,disabled_msg:1};de.call(e,{changed:t,current:e._state}),function(){this.set({hasHelp:!(!this.options||!this.options.slots||!this.options.slots.help)})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}function me(t){T(this,t),this._state=n({placeholder:""},t.data),this._fragment=function(t,e){var n,s,l,c,r,u,h=!1;function p(){h=!0,t.set({value:u.value}),h=!1}return{c:function(){n=d("div"),s=d("label"),l=f(e.label),c=f("\n    "),r=d("div"),u=d("textarea"),this.h()},h:function(){s.className="control-label",v(u,"input",p),u.placeholder=e.placeholder,x(u,"width",e.width||"auto"),r.className="controls",n.className="control-group vis-option-group vis-option-type-textarea"},m:function(t,a){i(n,t,a),o(s,n),o(l,s),o(c,n),o(r,n),o(u,r),u.value=e.value},p:function(t,e){t.label&&(l.data=e.label),h||(u.value=e.value),t.placeholder&&(u.placeholder=e.placeholder),t.width&&x(u,"width",e.width||"auto")},u:function(){a(n)},d:function(){m(u,"input",p)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(he.prototype,H),n(he.prototype,le),n(_e.prototype,H),n(me.prototype,H);var ge=it(function(t){if(!q(t))return[];var e=[];for(var n in t)e.push(n);return et&&ot(t,e),e});function be(t){var e,n=t.changed,o=t.current;if(n.selected&&o.selected){var i=this.get().axis,a=q(e=this.store.getMetadata("axes",{}))?R(e)?e.slice():ge({},e):e;"-"==o.selected?delete a[i]:a[i]=o.selected,this.store.setMetadata("axes",a)}}function xe(t,n){var s,l,c=n.axis["na-label"]||"--";return{c:function(){s=d("option"),l=f(c),this.h()},h:function(){s.__value="-",s.value=s.__value},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){t.axis&&c!==(c=e.axis["na-label"]||"--")&&(l.data=c)},u:function(){a(s)},d:e}}function ye(t,n){var s,l,c,r=n.column,u=(n.each_value,n.column_index,r.name);return{c:function(){s=d("option"),l=f(u),this.h()},h:function(){s.__value=c=r.name,s.value=s.__value},m:function(t,e){i(s,t,e),o(l,s)},p:function(t,e){r=e.column,e.each_value,e.column_index,t.columns&&u!==(u=r.name)&&(l.data=u),t.columns&&c!==(c=r.name)&&(s.__value=c),s.value=s.__value},u:function(){a(s)},d:e}}function ke(t){T(this,t),this._state=n(n(this.store._init(["visualization","dataset"]),{selected:!1}),t.data),this.store._add(this,["visualization","dataset"]),this._recompute({axis:1,$visualization:1,$dataset:1},this._state),this._handlers.state=[be],this._handlers.destroy=[j];var e=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var s,l,c,r,h,_,g=!1,b=e.$visualization&&e.$visualization.axes[e.axis].optional&&xe(0,e),x=e.columns,N=[],w=0;w<x.length;w+=1)N[w]=ye(0,n(n({},e),{each_value:x,column:x[w],column_index:w}));function C(){g=!0,t.set({selected:k(h)}),g=!1}return{c:function(){s=d("div"),l=d("label"),c=f("\n\n    "),r=d("div"),h=d("select"),b&&b.c(),_=p();for(var t=0;t<N.length;t+=1)N[t].c();this.h()},h:function(){l.className="control-label svelte-7khi8i",v(h,"change",C),"selected"in e||t.root._beforecreate.push(C),h.className="svelte-7khi8i",r.className="controls form-inline",s.className="control-group vis-option-group"},m:function(t,n){i(s,t,n),o(l,s),l.innerHTML=e.label,o(c,s),o(r,s),o(h,r),b&&b.m(h,null),o(_,h);for(var a=0;a<N.length;a+=1)N[a].m(h,null);y(h,e.selected)},p:function(t,e){t.label&&(l.innerHTML=e.label),e.$visualization&&e.$visualization.axes[e.axis].optional?b?b.p(t,e):((b=xe(0,e)).c(),b.m(h,_)):b&&(b.u(),b.d(),b=null);var o=e.columns;if(t.columns){for(var i=0;i<o.length;i+=1){var a=n(n({},e),{each_value:o,column:o[i],column_index:i});N[i]?N[i].p(t,a):(N[i]=ye(0,a),N[i].c(),N[i].m(h,null))}for(;i<N.length;i+=1)N[i].u(),N[i].d();N.length=o.length}g||y(h,e.selected)},u:function(){l.innerHTML="",a(s),b&&b.u();for(var t=0;t<N.length;t+=1)N[t].u()},d:function(){b&&b.d(),u(N),m(h,"change",C)}}}(this,this._state),this.root._oncreate.push(function(){var t={axis:1,$visualization:1,$dataset:1,label:1,selected:1,columns:1};be.call(e,{changed:t,current:e._state}),function(){var t=this;this.store.observe("visualization",function(e){if(!t.get().selected&&e){var n=t.store.getMetadata("axes")[t.get().axis];console.log("initialize",t.get().axis,n),t.set({selected:n})}})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._beforecreate),L(this._oncreate))}function Ne(t){T(this,t),this._state=n({unit:"",width:"100px",placeholder:""},t.data),this._fragment=function(t,e){var n,s,l,c,r,u=!1;function h(){u=!0,t.set({value:r.value}),u=!1}return{c:function(){n=d("div"),s=d("label"),l=f("\n    "),c=d("div"),r=d("input"),this.h()},h:function(){x(s,"width",e.width),s.className="control-label",v(r,"input",h),g(r,"type","text"),r.className="input-large",r.placeholder=e.placeholder,c.className="controls",n.className="control-group vis-option-group vis-option-type-text"},m:function(t,a){i(n,t,a),o(s,n),s.innerHTML=e.label,o(l,n),o(c,n),o(r,c),r.value=e.value},p:function(t,e){t.label&&(s.innerHTML=e.label),t.width&&x(s,"width",e.width),u||(r.value=e.value),t.placeholder&&(r.placeholder=e.placeholder)},u:function(){s.innerHTML="",a(n)},d:function(){m(r,"input",h)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(ke.prototype,H),ke.prototype._recompute=function(t,e){(t.axis||t.$visualization||t.$dataset)&&this._differs(e.columns,e.columns=function(t){var e=t.axis,n=t.$visualization,o=t.$dataset,i=[];return o&&n&&e?(o.eachColumn(function(t){lt(n.axes[e].accepts,t.type())>-1&&i.push({name:t.name()})}),i):[]}(e))&&(t.columns=!0)},n(Ne.prototype,H);var we={focus:function(){this.refs.searchInput.focus()},blur:function(){this.refs.searchInput.blur()},onClick:function(t){this.set({open:!0}),this.fire("focus",t)},search:function(t){this.set({open:!0}),this.fire("search",{query:t})},select:function(t,e){this.set({selectedItem:t,query:t.title,open:!1}),e&&e.stopPropagation(),this.fire("select",{item:t})},keyup:function(t){if(t){if(13===t.keyCode){var e=this.get().selectedItem;this.select(e)}if(38==t.keyCode||40==t.keyCode){var n=this.get(),o=n.selectedIndex,i=n.matches;isNaN(o)&&(o=-1);var a=i.length||0;38==t.keyCode&&(o=(o-1+a)%a),40==t.keyCode&&(o=(o+1)%a),this.set({selectedIndex:o,selectedItem:i[o]})}27==t.keyCode&&(this.set({open:!1}),this.blur())}}};function Ce(t){var e=t.changed,n=t.current;if(e.selectedIndex&&this.refs.dropdown){var o=this.refs.dropdown,i=n.selectedIndex,a=o.children[i].getBoundingClientRect(),s=o.getBoundingClientRect();a.y+a.height-s.y>s.height?o.scrollBy(0,a.y+a.height-s.y-s.height+5):a.y-s.y<0&&o.scrollBy(0,a.y-s.y-5)}}function Me(t,n){var o,s;return{c:function(){o=d("i"),this.h()},h:function(){o.className=s="icon "+n.icon+" svelte-kljjr2"},m:function(t,e){i(o,t,e)},p:function(t,e){t.icon&&s!==(s="icon "+e.icon+" svelte-kljjr2")&&(o.className=s)},u:function(){a(o)},d:e}}function Te(t,e){var n,o,s,l=e.item,c=(e.each_value,e.i),r=l.display||l.title;return{c:function(){n=d("li"),this.h()},h:function(){v(n,"click",je),n.className=o=(c==e.selectedIndex?"selected":"")+" svelte-kljjr2",n.style.cssText=s=l.style||"",n._svelte={component:t,each_value:e.each_value,i:e.i}},m:function(t,e){i(n,t,e),n.innerHTML=r},p:function(t,e){l=e.item,e.each_value,c=e.i,t.matches&&r!==(r=l.display||l.title)&&(n.innerHTML=r),t.selectedIndex&&o!==(o=(c==e.selectedIndex?"selected":"")+" svelte-kljjr2")&&(n.className=o),t.matches&&s!==(s=l.style||"")&&(n.style.cssText=s),n._svelte.each_value=e.each_value,n._svelte.i=e.i},u:function(){n.innerHTML="",a(n)},d:function(){m(n,"click",je)}}}function Le(t,e){for(var o,s=e.matches,l=[],c=0;c<s.length;c+=1)l[c]=Te(t,n(n({},e),{each_value:s,item:s[c],i:c}));return{c:function(){o=d("ul");for(var t=0;t<l.length;t+=1)l[t].c();this.h()},h:function(){o.className="dropdown-results svelte-kljjr2"},m:function(e,n){i(o,e,n);for(var a=0;a<l.length;a+=1)l[a].m(o,null);t.refs.dropdown=o},p:function(e,i){var a=i.matches;if(e.selectedIndex||e.matches){for(var s=0;s<a.length;s+=1){var c=n(n({},i),{each_value:a,item:a[s],i:s});l[s]?l[s].p(e,c):(l[s]=Te(t,c),l[s].c(),l[s].m(o,null))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){a(o);for(var t=0;t<l.length;t+=1)l[t].u()},d:function(){u(l),t.refs.dropdown===o&&(t.refs.dropdown=null)}}}function je(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.i];e.select(n,t)}function He(t){T(this,t),this.refs={},this._state=n({selection:"",query:"",icon:!1,placeholder:"",filter:"indexOf",selectedItem:void 0,selectedIndex:void 0,searching:!1,open:!1,items:[]},t.data),this._recompute({query:1,items:1,filter:1},this._state),this._handlers.update=[Ce],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,c,u,h,p,_,b,x,y=!1,k=t._slotted.button;function N(e){t.set({open:!1})}function w(){y=!0,t.set({query:l.value}),y=!1}function C(e){t.keyup(e)}function M(e){var n=t.get();t.search(n.query)}window.addEventListener("click",N);var T=e.icon&&Me(0,e);function L(e){t.set({open:!0})}var j=e.open&&e.matches.length&&Le(t,e);function H(e){t.onClick(e)}function $(t){t.stopPropagation()}return{c:function(){n=d("div"),s=d("div"),l=d("input"),u=f("\n\n        "),T&&T.c(),h=f("\n\n        "),p=d("div"),k||((_=d("button")).innerHTML='<span class="caret"></span>'),b=f("\n\n        "),j&&j.c(),this.h()},h:function(){v(l,"input",w),v(l,"keypress",C),v(l,"input",M),g(l,"type","search"),l.placeholder=c=e.open?e.placeholder:e.selection||e.placeholder,l.className="svelte-kljjr2",k||(v(_,"click",L),_.className="btn btn-small btn-primary svelte-kljjr2"),p.className="btn-wrap svelte-kljjr2",v(s,"click",H),s.className=x="dropdown "+(e.icon?"icon":"")+" "+(!e.open&&e.selection?"selection":"")+" svelte-kljjr2",v(n,"click",$),n.className="control-group vis-option-group vis-option-type-select"},m:function(a,c){i(n,a,c),o(s,n),o(l,s),t.refs.searchInput=l,l.value=e.query,o(u,s),T&&T.m(s,null),o(h,s),o(p,s),o(k||_,p),o(b,s),j&&j.m(s,null)},p:function(e,n){y||(l.value=n.query),(e.open||e.placeholder||e.selection)&&c!==(c=n.open?n.placeholder:n.selection||n.placeholder)&&(l.placeholder=c),n.icon?T?T.p(e,n):((T=Me(0,n)).c(),T.m(s,h)):T&&(T.u(),T.d(),T=null),n.open&&n.matches.length?j?j.p(e,n):((j=Le(t,n)).c(),j.m(s,null)):j&&(j.u(),j.d(),j=null),(e.icon||e.open||e.selection)&&x!==(x="dropdown "+(n.icon?"icon":"")+" "+(!n.open&&n.selection?"selection":"")+" svelte-kljjr2")&&(s.className=x)},u:function(){a(n),T&&T.u(),k&&r(p,k),j&&j.u()},d:function(){window.removeEventListener("click",N),m(l,"input",w),m(l,"keypress",C),m(l,"input",M),t.refs.searchInput===l&&(t.refs.searchInput=null),T&&T.d(),k||m(_,"click",L),j&&j.d(),m(s,"click",H),m(n,"click",$)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{query:1,items:1,filter:1,icon:1,open:1,selection:1,placeholder:1,matches:1,selectedIndex:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._oncreate))}function $e(t,n){var s,l,c,u,h=t._slotted.default;return{c:function(){s=d("div"),l=d("fieldset"),c=d("div"),this.h()},h:function(){c.className="control-group vis-option-group",l.id="visOptions",s.className=u="section "+n.id},m:function(t,e){i(s,t,e),o(l,s),o(c,l),h&&o(h,c)},p:function(t,e){t.id&&u!==(u="section "+e.id)&&(s.className=u)},u:function(){a(s),h&&r(c,h)},d:e}}function Se(t){var e,o,s,l;T(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(e=this,o=this._state,l=o.id==o.active&&$e(e,o),{c:function(){l&&l.c(),s=p()},m:function(t,e){l&&l.m(t,e),i(s,t,e)},p:function(t,n){n.id==n.active?l?l.p(t,n):((l=$e(e,n)).c(),l.m(s.parentNode,s)):l&&(l.u(),l.d(),l=null)},u:function(){l&&l.u(),a(s)},d:function(){l&&l.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(He.prototype,H),n(He.prototype,we),He.prototype._recompute=function(t,e){var n,o,i;(t.query||t.items||t.filter)&&this._differs(e.matches,e.matches=(o=(n=e).query,i=n.items,n.filter&&o?i&&i.filter?i.filter(function(t){return(t.search||t.title).toLowerCase().indexOf(o.toLowerCase())>-1}):[]:i))&&(t.matches=!0)},n(Se.prototype,H);var Ie={toggle:function(){if(!this.get().notoggle){var t=this.get(),e=t.open,n=t.id;if(n){var o=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};o["locator-map"]||(o["locator-map"]={}),o["locator-map"][n]="open"==o["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(o))}this.set({open:!e})}}};function Ae(t,n){var o,s,l;return{c:function(){o=d("i"),s=f("\n        "),l=d("i"),this.h()},h:function(){o.className="fa fa-chevron-up expand-group pull-right",l.className="fa fa-chevron-down collapse-group pull-right"},m:function(t,e){i(o,t,e),i(s,t,e),i(l,t,e)},u:function(){a(o),a(s),a(l)},d:e}}function ze(t,n){var s,l=t._slotted.default;return{c:function(){s=d("div"),this.h()},h:function(){s.className="option-group-content vis-option-type-chart-description"},m:function(t,e){i(s,t,e),l&&o(l,s)},u:function(){a(s),l&&r(s,l)},d:e}}function Ee(t){T(this,t),this._state=n({notoggle:!1,id:!1,open:!0},t.data),this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,r,u,h,p=!e.notoggle&&Ae();function _(e){t.toggle()}var g=e.open&&ze(t);return{c:function(){n=d("div"),s=d("label"),p&&p.c(),l=f("\n        "),r=d("noscript"),u=f("\n\n    "),g&&g.c(),this.h()},h:function(){v(s,"click",_),s.className="group-title svelte-ww03ir",n.className=h="vis-option-type-group "+(e.open?"group-open":"")+" "+(e.notoggle?"notoggle":"")+" svelte-ww03ir"},m:function(t,a){i(n,t,a),o(s,n),p&&p.m(s,null),o(l,s),o(r,s),r.insertAdjacentHTML("afterend",e.label),o(u,n),g&&g.m(n,null)},p:function(e,o){o.notoggle?p&&(p.u(),p.d(),p=null):p||((p=Ae()).c(),p.m(s,l)),e.label&&(c(r),r.insertAdjacentHTML("afterend",o.label)),o.open?g||((g=ze(t)).c(),g.m(n,null)):g&&(g.u(),g.d(),g=null),(e.open||e.notoggle)&&h!==(h="vis-option-type-group "+(o.open?"group-open":"")+" "+(o.notoggle?"notoggle":"")+" svelte-ww03ir")&&(n.className=h)},u:function(){c(r),a(n),p&&p.u(),g&&g.u()},d:function(){p&&p.d(),m(s,"click",_),g&&g.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get()||{},e=t.id;if(!t.notoggle&&e){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][e]&&this.set({open:"closed"!=n["locator-map"][e]})}}).call(e),e.fire("update",{changed:{open:1,notoggle:1,label:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._oncreate))}function Oe(t,e,n){e=U(e,n);for(var o,i=Y(t),a=0,s=i.length;a<s;a++)if(e(t[o=i[a]],o,t))return o}function De(t,e){return function(t,e,n){var o=(tt(t)?st:Oe)(t,e,n);if(void 0!==o&&-1!==o)return t[o]}(t,W(e))}n(Ee.prototype,H),n(Ee.prototype,Ie);var qe,Fe={select:function(t,e){if(!e.redirect&&(t.preventDefault(),!e.readonly&&(this.fire("select",e),"/edit/"==location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:e,id:n},"","/edit/"+n+"/"+e.id)}}};function Ye(t){var e=t.changed,n=t.current;if(e.active_i){var o=n.steps[n.active_i];if(o){var i=this.store.get(),a=i.id,s=i.title;window.document.title=s+" - "+a+" - "+o.title+" | Datawrapper"}}}function Re(t,n){var o;return{c:function(){o=d("i"),this.h()},h:function(){o.className="fa fa-check"},m:function(t,e){i(o,t,e)},u:function(){a(o)},d:e}}function Ke(t){T(this,t),this._state=n(n(this.store._init(["lastEditStep"]),{step:{title:"",index:1},maxStep:1,active:1}),t.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._handlers.update=[Ye],this._handlers.destroy=[j];var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,s,l,c,r,u,h,p,_,g=e.step.title,b=e.passed&&Re();function y(e){var n=t.get();t.select(e,n.step)}return{c:function(){n=d("a"),s=d("span"),l=f(e.index),c=f("\n    "),r=d("span"),u=f("\n    "),b&&b.c(),h=f("\n    "),p=d("div"),this.h()},h:function(){s.className="step",r.className="title",p.className="corner",v(n,"click",y),x(n,"width",95/e.steps.length+"%"),n.href=_=e.step.redirect?e.step.redirect:"#"+e.step.id,n.className=e.class_},m:function(t,e){i(n,t,e),o(s,n),o(l,s),o(c,n),o(r,n),r.innerHTML=g,o(u,n),b&&b.m(n,null),o(h,n),o(p,n)},p:function(t,e){t.index&&(l.data=e.index),t.step&&g!==(g=e.step.title)&&(r.innerHTML=g),e.passed?b||((b=Re()).c(),b.m(n,h)):b&&(b.u(),b.d(),b=null),t.steps&&x(n,"width",95/e.steps.length+"%"),t.step&&_!==(_=e.step.redirect?e.step.redirect:"#"+e.step.id)&&(n.href=_),t.class_&&(n.className=e.class_)},u:function(){r.innerHTML="",a(n),b&&b.u()},d:function(){b&&b.d(),m(n,"click",y)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1,class_:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this._oncreate))}function Pe(t){void 0===t&&(t=0),window._paq&&(qe&&window._paq.push(["setReferrerUrl",qe]),window._paq.push(["setGenerationTimeMs",t]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),qe=window.location.pathname)}n(Ke.prototype,H),n(Ke.prototype,Fe),Ke.prototype._recompute=function(t,e){var n,o,i;(t.active||t.steps)&&this._differs(e.active_i,e.active_i=(o=(n=e).active,(i=n.steps).indexOf(De(i,{id:o}))))&&(t.active_i=!0),(t.index||t.active_i||t.maxStep)&&this._differs(e.passed,e.passed=function(t){var e=t.index,n=t.active_i;return e<t.maxStep&&e!=n}(e))&&(t.passed=!0),(t.step||t.index||t.active||t.passed||t.$lastEditStep)&&this._differs(e.class_,e.class_=function(t){var e=t.step,n=t.index,o=t.active,i=t.passed,a=t.$lastEditStep,s=[];return e.readonly&&s.push("readonly"),o==e.id?s.push("active"):(n>a+1&&s.push("unseen"),i&&s.push("passed")),s.join(" ")}(e))&&(t.class_=!0)};var Be={select:function(t,e){this.set({active:t.id});var n=this.store.get().lastEditStep;this.store.set({lastEditStep:Math.max(n,e+1)}),Pe()},popstate:function(t){if(t.state&&t.state.id&&t.state.step){var e=t.state,n=e.id,o=e.step;n==this.store.get().id?(this.set({active:o.id}),Pe()):window.location.href="/edit/"+n+"/"+o.id}}};function Qe(t,e){var n=e.step,o=e.each_value,i=e.i,a={},s={index:i+1};i in e.each_value&&(s.step=n,a.step=!0),"steps"in e&&(s.steps=e.steps,a.steps=!0),"active"in e&&(s.active=e.active,a.active=!0);var l=new Ke({root:t.root,data:s,_bind:function(e,n){var s=t.get(),l={};!a.step&&e.step&&(o[i]=n.step,l.steps=s.steps),!a.steps&&e.steps&&(l.steps=n.steps),!a.active&&e.active&&(l.active=n.active),t._set(l),a={}}});return t.root._beforecreate.push(function(){l._bind({step:1,steps:1,active:1},l.get())}),l.on("select",function(e){t.select(n,i)}),{c:function(){l._fragment.c()},m:function(t,e){l._mount(t,e)},p:function(t,e){n=e.step,o=e.each_value,i=e.i;var s={};s.index=i+1,!a.step&&t.steps&&(s.step=n,a.step=!0),!a.steps&&t.steps&&(s.steps=e.steps,a.steps=!0),!a.active&&t.active&&(s.active=e.active,a.active=!0),l._set(s),a={}},u:function(){l._unmount()},d:function(){l.destroy(!1)}}}function Ge(t,n){var s,l,c,r,u,h,p;return{c:function(){s=d("div"),l=f("This chart belongs to "),c=d("a"),r=f("User "),u=f(n.$authorId),p=f(". Great power comes with great responsibility, so be careful with what you're doing!"),this.h()},h:function(){c.target="_blank",c.href=h="/admin/chart/by/"+n.$authorId,s.className="alert alert-warning",x(s,"text-align","center"),x(s,"margin-top","10px")},m:function(t,e){i(s,t,e),o(l,s),o(c,s),o(r,c),o(u,c),o(p,s)},p:function(t,e){t.$authorId&&(u.data=e.$authorId),t.$authorId&&h!==(h="/admin/chart/by/"+e.$authorId)&&(c.href=h)},u:function(){a(s)},d:e}}function We(t){T(this,t),this._state=n(n(this.store._init(["user","authorId"]),{steps:[]}),t.data),this.store._add(this,["user","authorId"]),this._handlers.destroy=[j];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var o,s,l;function c(e){t.popstate(e)}window.addEventListener("popstate",c);for(var r=e.steps,h=[],v=0;v<r.length;v+=1)h[v]=Qe(t,n(n({},e),{each_value:r,step:r[v],i:v}));var _=e.$user.id!=e.$authorId&&e.$user.isAdmin&&Ge(0,e);return{c:function(){o=d("div");for(var t=0;t<h.length;t+=1)h[t].c();s=f("\n\n"),_&&_.c(),l=p(),this.h()},h:function(){o.className="create-nav svelte-nols97"},m:function(t,e){i(o,t,e);for(var n=0;n<h.length;n+=1)h[n].m(o,null);i(s,t,e),_&&_.m(t,e),i(l,t,e)},p:function(e,i){var a=i.steps;if(e.steps||e.active){for(var s=0;s<a.length;s+=1){var c=n(n({},i),{each_value:a,step:a[s],i:s});h[s]?h[s].p(e,c):(h[s]=Qe(t,c),h[s].c(),h[s].m(o,null))}for(;s<h.length;s+=1)h[s].u(),h[s].d();h.length=a.length}i.$user.id!=i.$authorId&&i.$user.isAdmin?_?_.p(e,i):((_=Ge(0,i)).c(),_.m(l.parentNode,l)):_&&(_.u(),_.d(),_=null)},u:function(){a(o);for(var t=0;t<h.length;t+=1)h[t].u();a(s),_&&_.u(),a(l)},d:function(){window.removeEventListener("popstate",c),u(h),_&&_.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get(),e=t.active,n=t.steps,o=this.store.get(),i=o.lastEditStep,a=o.id,s=De(n,{id:e});this.store.set({lastEditStep:Math.max(i,n.indexOf(s)+1)}),window.history.replaceState({step:s,id:a},s.title)}).call(e),e.fire("update",{changed:{steps:1,active:1,$user:1,$authorId:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}return n(We.prototype,H),n(We.prototype,Be),{Checkbox:$,Color:qt,ColorPicker:Tt,Group:Ee,NumberInput:Bt,Switch:_e,Dropdown:ie,Radio:Wt,Select:te,SelectAxisColumn:ke,CustomFormat:Kt,Section:Se,TextArea:me,Help:he,Text:Ne,TypeAhead:He,EditorNav:We}});
