!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/upload",e):t.upload=e()}(this,function(){"use strict";function t(){}function e(t,e){for(var a in e)t[a]=e[a];return t}function a(t,e){e.appendChild(t)}function n(t,e,a){e.insertBefore(t,a)}function r(t){t.parentNode.removeChild(t)}function i(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function o(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function c(t,e,a){t.setAttribute(e,a)}function u(){return Object.create(null)}function d(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function h(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e}function f(t,e){var a=t in this._handlers&&this._handlers[t].slice();if(a)for(var n=0;n<a.length;n+=1){var r=a[n];r.__calling||(r.__calling=!0,r.call(this,e),r.__calling=!1)}}function _(t){return t?this._state[t]:this._state}function p(t,e){t._handlers=u(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function v(t,e,a){var n=e.bind(this);return a&&!1===a.init||n(this.get()[t],void 0),this.on(a&&a.defer?"update":"state",function(e){e.changed[t]&&n(e.current[t],e.previous&&e.previous[t])})}function m(t,e){if("teardown"===t)return this.on("destroy",e);var a=this._handlers[t]||(this._handlers[t]=[]);return a.push(e),{cancel:function(){var t=a.indexOf(e);~t&&a.splice(t,1)}}}function g(t){for(;t&&t.length;)t.shift()()}var y={destroy:d,get:_,fire:f,observe:v,on:m,set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:d,_recompute:t,_set:function(t){var a=this._state,n={},r=!1;for(var i in t)this._differs(t[i],a[i])&&(n[i]=r=!0);r&&(this._state=e(e({},a),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:a}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:a})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:h};function b(i){var s,c,u,d;p(this,i),this._state=e({placeholder:"Daten hier einfügen..."},i.data),this._fragment=(s=this._state,{c:function(){c=o("form"),u=o("div"),d=o("textarea"),this.h()},h:function(){var t,e;d.readOnly=s.readonly,d.id="upload-data-text",t="resize",e="none",d.style.setProperty(t,e),d.placeholder=s.placeholder,d.className="svelte-1sz3211",d.value=s.chartData,u.className="control-group",c.className="upload-form"},m:function(t,e){n(c,t,e),a(u,c),a(d,u)},p:function(t,e){t.readonly&&(d.readOnly=e.readonly),t.placeholder&&(d.placeholder=e.placeholder),t.chartData&&(d.value=e.chartData)},u:function(){r(c)},d:t}),i.target&&(this._fragment.c(),this._mount(i.target,i.anchor))}function x(t,a){for(var s,u,d=a.group,h=(a.each_value,a.group_index,d.datasets),l=[],f=0;f<h.length;f+=1)l[f]=D(t,e(e({},a),{each_value_1:h,dataset:h[f],dataset_index:f}));return{c:function(){s=o("optgroup");for(var t=0;t<l.length;t+=1)l[t].c();this.h()},h:function(){c(s,"label",u=d.type)},m:function(t,e){n(s,t,e);for(var a=0;a<l.length;a+=1)l[a].m(s,null)},p:function(a,n){d=n.group,n.each_value,n.group_index;var r=d.datasets;if(a.datasetsArray){for(var i=0;i<r.length;i+=1){var o=e(e({},n),{each_value_1:r,dataset:r[i],dataset_index:i});l[i]?l[i].p(a,o):(l[i]=D(t,o),l[i].c(),l[i].m(s,null))}for(;i<l.length;i+=1)l[i].u(),l[i].d();l.length=r.length}a.datasetsArray&&u!==(u=d.type)&&c(s,"label",u)},u:function(){r(s);for(var t=0;t<l.length;t+=1)l[t].u()},d:function(){i(l)}}}function D(e,i){i.group,i.each_value,i.group_index;var c,u,d,h=i.dataset,l=(i.each_value_1,i.dataset_index,h.title);return{c:function(){c=o("option"),u=s(l),this.h()},h:function(){c.__value=d=h.id,c.value=c.__value,c.className="demo-dataset"},m:function(t,e){n(c,t,e),a(u,c)},p:function(t,e){e.group,e.each_value,e.group_index,h=e.dataset,e.each_value_1,e.dataset_index,t.datasetsArray&&l!==(l=h.title)&&(u.data=l),t.datasetsArray&&d!==(d=h.id)&&(c.__value=d),c.value=c.__value},u:function(){r(c)},d:t}}function w(t){p(this,t),this._state=e({},t.data),this._recompute({datasets:1},this._state),this._fragment=function(t,c){for(var u,d,h,l,f,_,p,v,m,g,y=c.datasetsArray,b=[],D=0;D<y.length;D+=1)b[D]=x(t,e(e({},c),{each_value:y,group:y[D],group_index:D}));return{c:function(){u=o("p"),d=s("Markiere die Datentabelle in Excel oder OpenOffice (einschließlich der ersten Zeile mit den Spaltentiteln), und fügen ihn in das nebenstehende Textfeld. Alternativ kannst du auch eine CSV-Datei hochladen."),h=s("\n\n"),l=o("div"),f=o("p"),_=s("Wenn du Datawrapper nur ausprobieren möchtest, kannst du eine Beispiel-Datensatz aus dieser Liste auswählen:"),p=s("\n    "),v=o("select"),m=o("option"),g=s("Beispiel-Datensatz auswählen");for(var t=0;t<b.length;t+=1)b[t].c();this.h()},h:function(){m.__value="Beispiel-Datensatz auswählen",m.value=m.__value,v.disabled=c.readonly,v.id="demo-datasets",v.className="",l.className="demo-datasets"},m:function(t,e){n(u,t,e),a(d,u),n(h,t,e),n(l,t,e),a(f,l),a(_,f),a(p,l),a(v,l),a(m,v),a(g,m);for(var r=0;r<b.length;r+=1)b[r].m(v,null)},p:function(a,n){m.value=m.__value;var r=n.datasetsArray;if(a.datasetsArray){for(var i=0;i<r.length;i+=1){var o=e(e({},n),{each_value:r,group:r[i],group_index:i});b[i]?b[i].p(a,o):(b[i]=x(t,o),b[i].c(),b[i].m(v,null))}for(;i<b.length;i+=1)b[i].u(),b[i].d();b.length=r.length}a.readonly&&(v.disabled=n.readonly)},u:function(){r(u),r(h),r(l);for(var t=0;t<b.length;t+=1)b[t].u()},d:function(){i(b)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}e(b.prototype,y),e(w.prototype,y),w.prototype._recompute=function(t,e){var a;t.datasets&&this._differs(e.datasetsArray,e.datasetsArray=(a=e.datasets,Object.keys(a).map(function(t){return a[t]})))&&(t.datasetsArray=!0)},e(function(a){var i;p(this,a),this._state=e({},a.data),this._fragment=(this._state,{c:function(){(i=o("button")).textContent="BUTTON"},m:function(t,e){n(i,t,e)},p:t,u:function(){r(i)},d:t}),a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}.prototype,y);function N(t,e){var i,c,u,d,h,l,f,_=e.btn,p=(e.each_value,e.btn_index,_.title);return{c:function(){i=o("li"),c=o("i"),d=s("\n                        "),h=o("span"),l=s(p),this.h()},h:function(){var a,n;c.className=u=_.icon+" svelte-16m922t",h.className="svelte-16m922t",a="click",n=A,i.addEventListener(a,n,!1),i.className=f="action "+(e.active==_.id?"active":"")+" svelte-16m922t",i._svelte={component:t,each_value:e.each_value,btn_index:e.btn_index}},m:function(t,e){n(i,t,e),a(c,i),a(d,i),a(h,i),a(l,h)},p:function(t,e){_=e.btn,e.each_value,e.btn_index,t.buttons&&u!==(u=_.icon+" svelte-16m922t")&&(c.className=u),t.buttons&&p!==(p=_.title)&&(l.data=p),(t.active||t.buttons)&&f!==(f="action "+(e.active==_.id?"active":"")+" svelte-16m922t")&&(i.className=f),i._svelte.each_value=e.each_value,i._svelte.btn_index=e.btn_index},u:function(){r(i)},d:function(){var t,e;t="click",e=A,i.removeEventListener(t,e,!1)}}}function A(t){var e=this._svelte.component,a=this._svelte.each_value[this._svelte.btn_index];e.btnAction(a)}function C(t){p(this,t),this._state=e({Upload:b,UploadHelp:w,active:"copy",buttons:[{id:"copy",title:"Copy & paste data table",icon:"im im-copy",upload:b,action:function(){}},{id:"upload",title:"Upload CSV/TSV file",icon:"im im-upload",upload:b,action:function(){console.log("upload")}}]},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,c){for(var u,d,h,l,f,_,p,v,m,g,y,b,x,D,w,A,C={},k={},U=c.buttons,O=[],E=0;E<U.length;E+=1)O[E]=N(t,e(e({},c),{each_value:U,btn:U[E],btn_index:E}));var P=c.UploadHelp;function z(e){var a={};return"datasets"in e&&(a.datasets=e.datasets,C.datasets=!0),{root:t.root,data:a,_bind:function(e,a){t.get();var n={};!C.datasets&&e.datasets&&(n.datasets=a.datasets),t._set(n),C={}}}}if(P){var B=new P(z(c));t.root._beforecreate.push(function(){B._bind({datasets:1},B.get())})}var H=c.Upload;function T(e){var a={};return"chartData"in e&&(a.chartData=e.chartData,k.chartData=!0),"readonly"in e&&(a.readonly=e.readonly,k.readonly=!0),{root:t.root,data:a,_bind:function(e,a){t.get();var n={};!k.chartData&&e.chartData&&(n.chartData=a.chartData),!k.readonly&&e.readonly&&(n.readonly=a.readonly),t._set(n),k={}}}}if(H){var j=new H(T(c));t.root._beforecreate.push(function(){j._bind({chartData:1,readonly:1},j.get())})}return{c:function(){u=o("div"),d=o("div"),h=o("div"),l=o("div"),(f=o("h3")).textContent="How to you want to upload your data?",_=s("\n\n                "),p=o("ul");for(var t=0;t<O.length;t+=1)O[t].c();v=s("\n\n                "),B&&B._fragment.c(),m=s("\n        "),g=o("div"),j&&j._fragment.c(),y=s("\n\n            "),b=o("div"),x=o("a"),D=s("Weiter"),w=s(" "),A=o("i"),this.h()},h:function(){p.className="import-methods svelte-16m922t",l.className="sidebar",h.className="span5",A.className="icon-chevron-right icon-white",x.href="describe",x.className="submit btn btn-primary",x.id="describe-proceed",b.className="buttons pull-right",g.className="span7",d.className="row",u.className="chart-editor dw-create-upload upload-data"},m:function(t,e){n(u,t,e),a(d,u),a(h,d),a(l,h),a(f,l),a(_,l),a(p,l);for(var r=0;r<O.length;r+=1)O[r].m(p,null);a(v,l),B&&B._mount(l,null),a(m,d),a(g,d),j&&j._mount(g,null),a(y,g),a(b,g),a(x,b),a(D,x),a(w,x),a(A,x)},p:function(a,n){var r=n.buttons;if(a.buttons||a.active){for(var i=0;i<r.length;i+=1){var o=e(e({},n),{each_value:r,btn:r[i],btn_index:i});O[i]?O[i].p(a,o):(O[i]=N(t,o),O[i].c(),O[i].m(p,null))}for(;i<O.length;i+=1)O[i].u(),O[i].d();O.length=r.length}if(P!==(P=n.UploadHelp))B&&B.destroy(),P&&((B=new P(z(n)))._fragment.c(),B._mount(l,null));else{var s={};!C.datasets&&a.datasets&&(s.datasets=n.datasets,C.datasets=!0),B._set(s),C={}}if(H!==(H=n.Upload))j&&j.destroy(),H&&((j=new H(T(n)))._fragment.c(),j._mount(g,y));else{var c={};!k.chartData&&a.chartData&&(c.chartData=n.chartData,k.chartData=!0),!k.readonly&&a.readonly&&(c.readonly=n.readonly,k.readonly=!0),j._set(c),k={}}},u:function(){r(u);for(var t=0;t<O.length;t+=1)O[t].u()},d:function(){i(O),B&&B.destroy(!1),j&&j.destroy(!1)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function k(t,a){this._observers={pre:u(),post:u()},this._handlers={},this._dependents=[],this._computed=u(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=a&&a.immutable?l:h}e(C.prototype,y),e(C.prototype,{btnAction:function(t){this.set({active:t.id}),t.action&&t.action(),t.upload&&this.set({Upload:t.upload})}}),e(k.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},a=0;a<t.length;a+=1){var n=t[a];e["$"+n]=this._state[n]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,a=this._sortedComputedProperties=[],n=u();function r(i){if(t[i])throw new Error("Cyclical dependency detected");if(!n[i]){n[i]=!0;var o=e[i];o&&(t[i]=!0,o.deps.forEach(r),a.push(o))}}for(var i in this._computed)t=u(),r(i)},compute:function(t,e,a){var n,r=this,i={deps:e,update:function(i,o,s){var c=e.map(function(t){return t in o&&(s=!0),i[t]});if(s){var u=a.apply(null,c);r._differs(u,n)&&(n=u,o[t]=!0,i[t]=n)}}};i.update(this._state,{},!0),this._computed[t]=i,this._sortComputedProperties()},fire:f,get:_,observe:v,on:m,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(e){t(e.current,e.changed)})},set:function(t){var a=this._state,n=this._changed={},r=!1;for(var i in t){if(this._computed[i])throw new Error("'"+i+"' is a read-only property");this._differs(t[i],a[i])&&(n[i]=r=!0)}if(r){this._state=e(e({},a),t);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:a});var s=this._dependents.slice();for(o=0;o<s.length;o+=1){var c=s[o],u={};r=!1;for(var d=0;d<c.props.length;d+=1){var h=c.props[d];h in n&&(u["$"+h]=this._state[h],r=!0)}r&&c.component.set(u)}this.fire("update",{changed:n,current:this._state,previous:a})}}});return{App:C,store:new k({}),data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0}}});
