{% use "utils.twig" %}{% extends "core.twig" %}

{% block content %}

{{ svelte("team-settings", svelte_data) }}


<!--<script type="text/javascript">
	require(['svelte/team-settings'], function(mod) {
		var data = {{data|json|raw}};

		data.settings = Object.assign({
			folders: "expanded",
			embed: {
				preferred_embed: "responsive-iframe",
			    custom_embed: {
			        title: "",
			        text: "",
			        template:  ""
			    }
			},
			default: {
				locale: ""
			},
			slack_enabled: false,
			slack_webhook_url: "",
			ftp: {
				enabled: false,
				server: "",
				user: "",
				password: "",
				directory: "",
				filename: ""
			},
			disableVisualizations: {
				enabled: false,
				allowAdmins: false,
				visualizations: {}
			}
		}, data.settings);

		if (!data.settings.embed.custom_embed) {
			data.settings.embed.custom_embed = {
		        title: "",
		        text: "",
		        template:  ""
		    };
		}

		if (!data.settings.ftp) {
			data.settings.ftp = {
				enabled: false,
				server: "",
				user: "",
				password: "",
				directory: "",
				filename: ""
			};
		}

		mod.set(data);

		if (window.location.hash.replace("#", "")) {
			mod.activate(window.location.hash.replace("#", ""))
		}

		mod.updateUsers();

		window.teamSettings = mod;
	});
</script>-->

{% endblock %}
