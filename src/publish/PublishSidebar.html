<!-- assuming we're already inside a <div class="span5"> -->
<div class="dw-create-publish">
    <div class="publish-step is-published">
        <svelte:component this="{PublishLogic}" />
    </div>
</div>
<script>

    import PublishLogic from './PublishLogic.html';
    import {loadScript, loadStylesheet} from '../shared/utils';

    export default {
        oncreate() {
            this.store.observe('publishLogic', (cfg) => {
                if (cfg) {
                    loadStylesheet(cfg.css);
                    loadScript(cfg.src, () => {
                        console.log('script loaded', cfg.src);
                        require([cfg.mod], (mod) => {
                            console.log('module loaded');
                            this.set({PublishLogic: mod.App});
                        })
                    })
                }else {
                    this.set({PublishLogic});
                }
            });
        },
        data() {
            return {
                PublishLogic
            }
        }
    }

</script>
