<section>
    <h4>{ user.email }</h4>

    <ul class="unstyled props">
        <li><b>ID:</b> { user.id }</li>
        <li><b>Name:</b> { user.name || "â€“" }</li>
        <li><b>E-Mail:</b> { user.email }</li>
        <li>
            <b>Charts:</b>
            <a href="/admin/chart/by/{ user.id }">
                {user.chartCount}
            </a>
        </li>
        <li><b>Created At:</b> {user.createdAt}</li>
        <li><b>Role:</b> {user.role}</li>
    </ul>

    <hr />

    <h4>Authentication</h4>
    <div>
        <input type="text" bind:value="resetPasswordToken" data-test="input-name" />
        <button on:click="resetPassword(user.email, user.token)" class="btn btn-default btn-sm">
            Send password reset link
        </button>
    </div>
    {#if user.resetPasswordToken}
    <code>/account/reset-password/{user.resetPasswordToken}</code>
    {/if}
    <hr />
    <button type="button" class="btn btn-default" on:click="close()" data-test="close">Back</button>
    <button type="button" class="btn btn-primary">Save changes</button>
</section>

<style>
    .props b {
        width: 90px;
        display: inline-block;
        font-weight: bold;
    }
</style>

<script>
    export default {
        data: () => ({
            resetPasswordToken: ''
        }),

        methods: {
            close() {
                this.fire('close');
            },
            resetPassword(email) {
                const { resetPasswordToken } = this.get();
                this.fire('resetPassword', { email, token: resetPasswordToken });
            }
        }
    };
</script>
